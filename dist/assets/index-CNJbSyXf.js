import{r as m,a as br,b as cc,c as Oe,R as N,d as ui,e as hi}from"./vendor-D7VFG2xG.js";import{c as fi,R as ws,B as dc,C as Zn,X as eo,Y as to,T as _s,a as ro,L as uc,b as hc,P as fc,d as mc,e as pc}from"./charts-ImKm-7Se.js";import{C as Ae,a as Ys,b as Xs,H as gc,B as vc,c as ft,U as qr,S as Hr,L as yc,T as Wt,d as Kr,e as jn,f as mi,g as bc,M as Qs,P as xc,h as wc,i as _c,A as so,j as pi,k as Sc,l as jc,m as no,n as kc,o as Ec,V as Nc,p as oo,q as io,r as Cc,s as Ss,E as js,t as ks}from"./ui-CAwNHu8-.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();var gi={exports:{}},rs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=m,Ac=Symbol.for("react.element"),Pc=Symbol.for("react.fragment"),Rc=Object.prototype.hasOwnProperty,Ic=Tc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oc={key:!0,ref:!0,__self:!0,__source:!0};function vi(r,e,t){var s,n={},o=null,a=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Rc.call(e,s)&&!Oc.hasOwnProperty(s)&&(n[s]=e[s]);if(r&&r.defaultProps)for(s in e=r.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:Ac,type:r,key:o,ref:a,props:n,_owner:Ic.current}}rs.Fragment=Pc;rs.jsx=vi;rs.jsxs=vi;gi.exports=rs;var i=gi.exports,yi,ao=br;yi=ao.createRoot,ao.hydrateRoot;function lo(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function bi(...r){return e=>{let t=!1;const s=r.map(n=>{const o=lo(n,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let n=0;n<s.length;n++){const o=s[n];typeof o=="function"?o():lo(r[n],null)}}}}function de(...r){return m.useCallback(bi(...r),r)}function mr(r){const e=$c(r),t=m.forwardRef((s,n)=>{const{children:o,...a}=s,l=m.Children.toArray(o),c=l.find(Lc);if(c){const d=c.props.children,h=l.map(u=>u===c?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:u);return i.jsx(e,{...a,ref:n,children:m.isValidElement(d)?m.cloneElement(d,void 0,h):null})}return i.jsx(e,{...a,ref:n,children:o})});return t.displayName=`${r}.Slot`,t}var xi=mr("Slot");function $c(r){const e=m.forwardRef((t,s)=>{const{children:n,...o}=t;if(m.isValidElement(n)){const a=Bc(n),l=Mc(o,n.props);return n.type!==m.Fragment&&(l.ref=s?bi(s,a):a),m.cloneElement(n,l)}return m.Children.count(n)>1?m.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Dc=Symbol("radix.slottable");function Lc(r){return m.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Dc}function Mc(r,e){const t={...e};for(const s in e){const n=r[s],o=e[s];/^on[A-Z]/.test(s)?n&&o?t[s]=(...l)=>{const c=o(...l);return n(...l),c}:n&&(t[s]=n):s==="style"?t[s]={...n,...o}:s==="className"&&(t[s]=[n,o].filter(Boolean).join(" "))}return{...r,...t}}function Bc(r){var s,n;let e=(s=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(n=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const co=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,uo=fi,kn=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return uo(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:o}=e,a=Object.keys(n).map(d=>{const h=t==null?void 0:t[d],u=o==null?void 0:o[d];if(h===null)return null;const g=co(h)||co(u);return n[d][g]}),l=t&&Object.entries(t).reduce((d,h)=>{let[u,g]=h;return g===void 0||(d[u]=g),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,h)=>{let{class:u,className:g,...p}=h;return Object.entries(p).every(y=>{let[f,v]=y;return Array.isArray(v)?v.includes({...o,...l}[f]):{...o,...l}[f]===v})?[...d,u,g]:d},[]);return uo(r,a,c,t==null?void 0:t.class,t==null?void 0:t.className)},En="-",Fc=r=>{const e=Hc(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:a=>{const l=a.split(En);return l[0]===""&&l.length!==1&&l.shift(),wi(l,e)||Uc(a)},getConflictingClassGroupIds:(a,l)=>{const c=t[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},wi=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?wi(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const o=r.join(En);return(a=e.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},ho=/^\[(.+)\]$/,Uc=r=>{if(ho.test(r)){const e=ho.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Hc=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return Wc(Object.entries(r.classGroups),t).forEach(([o,a])=>{Zs(a,s,o,e)}),s},Zs=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const o=n===""?e:fo(e,n);o.classGroupId=t;return}if(typeof n=="function"){if(zc(n)){Zs(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([o,a])=>{Zs(a,fo(e,o),t,s)})})},fo=(r,e)=>{let t=r;return e.split(En).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},zc=r=>r.isThemeGetter,Wc=(r,e)=>e?r.map(([t,s])=>{const n=s.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[e+a,l])):o);return[t,n]}):r,Vc=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(o,a)=>{t.set(o,a),e++,e>r&&(e=0,s=t,t=new Map)};return{get(o){let a=t.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return n(o,a),a},set(o,a){t.has(o)?t.set(o,a):n(o,a)}}},_i="!",qc=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],o=e.length,a=l=>{const c=[];let d=0,h=0,u;for(let v=0;v<l.length;v++){let b=l[v];if(d===0){if(b===n&&(s||l.slice(v,v+o)===e)){c.push(l.slice(h,v)),h=v+o;continue}if(b==="/"){u=v;continue}}b==="["?d++:b==="]"&&d--}const g=c.length===0?l:l.substring(h),p=g.startsWith(_i),y=p?g.substring(1):g,f=u&&u>h?u-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:f}};return t?l=>t({className:l,parseClassName:a}):a},Kc=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},Gc=r=>({cache:Vc(r.cacheSize),parseClassName:qc(r),...Fc(r)}),Jc=/\s+/,Yc=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,o=[],a=r.trim().split(Jc);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:u,baseClassName:g,maybePostfixModifierPosition:p}=t(d);let y=!!p,f=s(y?g.substring(0,p):g);if(!f){if(!y){l=d+(l.length>0?" "+l:l);continue}if(f=s(g),!f){l=d+(l.length>0?" "+l:l);continue}y=!1}const v=Kc(h).join(":"),b=u?v+_i:v,w=b+f;if(o.includes(w))continue;o.push(w);const x=n(f,y);for(let _=0;_<x.length;++_){const S=x[_];o.push(b+S)}l=d+(l.length>0?" "+l:l)}return l};function Xc(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Si(e))&&(s&&(s+=" "),s+=t);return s}const Si=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=Si(r[s]))&&(t&&(t+=" "),t+=e);return t};function Qc(r,...e){let t,s,n,o=a;function a(c){const d=e.reduce((h,u)=>u(h),r());return t=Gc(d),s=t.cache.get,n=t.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const h=Yc(c,t);return n(c,h),h}return function(){return o(Xc.apply(null,arguments))}}const ae=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},ji=/^\[(?:([a-z-]+):)?(.+)\]$/i,Zc=/^\d+\/\d+$/,ed=new Set(["px","full","screen"]),td=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sd=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nd=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,od=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qe=r=>Vt(r)||ed.has(r)||Zc.test(r),it=r=>Qt(r,"length",fd),Vt=r=>!!r&&!Number.isNaN(Number(r)),Es=r=>Qt(r,"number",Vt),nr=r=>!!r&&Number.isInteger(Number(r)),id=r=>r.endsWith("%")&&Vt(r.slice(0,-1)),z=r=>ji.test(r),at=r=>td.test(r),ad=new Set(["length","size","percentage"]),ld=r=>Qt(r,ad,ki),cd=r=>Qt(r,"position",ki),dd=new Set(["image","url"]),ud=r=>Qt(r,dd,pd),hd=r=>Qt(r,"",md),or=()=>!0,Qt=(r,e,t)=>{const s=ji.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},fd=r=>rd.test(r)&&!sd.test(r),ki=()=>!1,md=r=>nd.test(r),pd=r=>od.test(r),gd=()=>{const r=ae("colors"),e=ae("spacing"),t=ae("blur"),s=ae("brightness"),n=ae("borderColor"),o=ae("borderRadius"),a=ae("borderSpacing"),l=ae("borderWidth"),c=ae("contrast"),d=ae("grayscale"),h=ae("hueRotate"),u=ae("invert"),g=ae("gap"),p=ae("gradientColorStops"),y=ae("gradientColorStopPositions"),f=ae("inset"),v=ae("margin"),b=ae("opacity"),w=ae("padding"),x=ae("saturate"),_=ae("scale"),S=ae("sepia"),k=ae("skew"),j=ae("space"),A=ae("translate"),B=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",z,e],I=()=>[z,e],E=()=>["",Qe,it],P=()=>["auto",Vt,z],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],C=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",z],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Vt,z];return{cacheSize:500,separator:":",theme:{colors:[or],spacing:[Qe,it],blur:["none","",at,z],brightness:te(),borderColor:[r],borderRadius:["none","","full",at,z],borderSpacing:I(),borderWidth:E(),contrast:te(),grayscale:O(),hueRotate:te(),invert:O(),gap:I(),gradientColorStops:[r],gradientColorStopPositions:[id,it],inset:W(),margin:W(),opacity:te(),padding:I(),saturate:te(),scale:te(),sepia:O(),skew:te(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",z]}],container:["container"],columns:[{columns:[at]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),z]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nr,z]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",z]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",nr,z]}],"grid-cols":[{"grid-cols":[or]}],"col-start-end":[{col:["auto",{span:["full",nr,z]},z]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[or]}],"row-start-end":[{row:["auto",{span:[nr,z]},z]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",z]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",z,e]}],"min-w":[{"min-w":[z,e,"min","max","fit"]}],"max-w":[{"max-w":[z,e,"none","full","min","max","fit","prose",{screen:[at]},at]}],h:[{h:[z,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[z,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[z,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[z,e,"auto","min","max","fit"]}],"font-size":[{text:["base",at,it]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Es]}],"font-family":[{font:[or]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",z]}],"line-clamp":[{"line-clamp":["none",Vt,Es]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qe,z]}],"list-image":[{"list-image":["none",z]}],"list-style-type":[{list:["none","disc","decimal",z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...C(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qe,it]}],"underline-offset":[{"underline-offset":["auto",Qe,z]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),cd]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ld]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ud]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...C(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:C()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...C()]}],"outline-offset":[{"outline-offset":[Qe,z]}],"outline-w":[{outline:[Qe,it]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Qe,it]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",at,hd]}],"shadow-color":[{shadow:[or]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",at,z]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",z]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",z]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[nr,z]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",z]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",z]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",z]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Qe,it,Es]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vd=Qc(gd);function se(...r){return vd(fi(r))}const yd=kn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ye({className:r,variant:e,size:t,asChild:s=!1,...n}){const o=s?xi:"button";return i.jsx(o,{"data-slot":"button",className:se(yd({variant:e,size:t,className:r})),...n})}function K({className:r,...e}){return i.jsx("div",{"data-slot":"card",className:se("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function oe({className:r,...e}){return i.jsx("div",{"data-slot":"card-header",className:se("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function le({className:r,...e}){return i.jsx("h4",{"data-slot":"card-title",className:se("leading-none",r),...e})}function bd({className:r,...e}){return i.jsx("p",{"data-slot":"card-description",className:se("text-muted-foreground",r),...e})}function Y({className:r,...e}){return i.jsx("div",{"data-slot":"card-content",className:se("px-6 [&:last-child]:pb-6",r),...e})}function gt(r,e=[]){let t=[];function s(o,a){const l=m.createContext(a),c=t.length;t=[...t,a];const d=u=>{var b;const{scope:g,children:p,...y}=u,f=((b=g==null?void 0:g[r])==null?void 0:b[c])||l,v=m.useMemo(()=>y,Object.values(y));return i.jsx(f.Provider,{value:v,children:p})};d.displayName=o+"Provider";function h(u,g){var f;const p=((f=g==null?void 0:g[r])==null?void 0:f[c])||l,y=m.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${o}\``)}return[d,h]}const n=()=>{const o=t.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[r])||o;return m.useMemo(()=>({[`__scope${r}`]:{...l,[r]:c}}),[l,c])}};return n.scopeName=r,[s,xd(n,...e)]}function xd(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const s=r.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const a=s.reduce((l,{useScope:c,scopeName:d})=>{const u=c(o)[`__scope${d}`];return{...l,...u}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function tt(r){const e=m.useRef(r);return m.useEffect(()=>{e.current=r}),m.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}var pe=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},wd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G=wd.reduce((r,e)=>{const t=mr(`Primitive.${e}`),s=m.forwardRef((n,o)=>{const{asChild:a,...l}=n,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${e}`,{...r,[e]:s}},{});function _d(r,e){r&&br.flushSync(()=>r.dispatchEvent(e))}var Ei={exports:{}},Ni={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=m;function Sd(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var jd=typeof Object.is=="function"?Object.is:Sd,kd=Jt.useState,Ed=Jt.useEffect,Nd=Jt.useLayoutEffect,Cd=Jt.useDebugValue;function Td(r,e){var t=e(),s=kd({inst:{value:t,getSnapshot:e}}),n=s[0].inst,o=s[1];return Nd(function(){n.value=t,n.getSnapshot=e,Ns(n)&&o({inst:n})},[r,t,e]),Ed(function(){return Ns(n)&&o({inst:n}),r(function(){Ns(n)&&o({inst:n})})},[r]),Cd(t),t}function Ns(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!jd(r,t)}catch{return!0}}function Ad(r,e){return e()}var Pd=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ad:Td;Ni.useSyncExternalStore=Jt.useSyncExternalStore!==void 0?Jt.useSyncExternalStore:Pd;Ei.exports=Ni;var Rd=Ei.exports;function Id(){return Rd.useSyncExternalStore(Od,()=>!0,()=>!1)}function Od(){return()=>{}}var Nn="Avatar",[$d,oy]=gt(Nn),[Dd,Ci]=$d(Nn),Ti=m.forwardRef((r,e)=>{const{__scopeAvatar:t,...s}=r,[n,o]=m.useState("idle");return i.jsx(Dd,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:i.jsx(G.span,{...s,ref:e})})});Ti.displayName=Nn;var Ai="AvatarImage",Pi=m.forwardRef((r,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:n=()=>{},...o}=r,a=Ci(Ai,t),l=Ld(s,o),c=tt(d=>{n(d),a.onImageLoadingStatusChange(d)});return pe(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(G.img,{...o,ref:e,src:s}):null});Pi.displayName=Ai;var Ri="AvatarFallback",Ii=m.forwardRef((r,e)=>{const{__scopeAvatar:t,delayMs:s,...n}=r,o=Ci(Ri,t),[a,l]=m.useState(s===void 0);return m.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(G.span,{...n,ref:e}):null});Ii.displayName=Ri;function mo(r,e){return r?e?(r.src!==e&&(r.src=e),r.complete&&r.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ld(r,{referrerPolicy:e,crossOrigin:t}){const s=Id(),n=m.useRef(null),o=s?(n.current||(n.current=new window.Image),n.current):null,[a,l]=m.useState(()=>mo(o,r));return pe(()=>{l(mo(o,r))},[o,r]),pe(()=>{const c=u=>()=>{l(u)};if(!o)return;const d=c("loaded"),h=c("error");return o.addEventListener("load",d),o.addEventListener("error",h),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",d),o.removeEventListener("error",h)}},[o,t,e]),a}var Md=Ti,Bd=Pi,Fd=Ii;function Oi({className:r,...e}){return i.jsx(Md,{"data-slot":"avatar",className:se("relative flex size-10 shrink-0 overflow-hidden rounded-full",r),...e})}function $i({className:r,...e}){return i.jsx(Bd,{"data-slot":"avatar-image",className:se("aspect-square size-full",r),...e})}function Di({className:r,...e}){return i.jsx(Fd,{"data-slot":"avatar-fallback",className:se("bg-muted flex size-full items-center justify-center rounded-full",r),...e})}const Ud=kn("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ht({className:r,variant:e,asChild:t=!1,...s}){const n=t?xi:"span";return i.jsx(n,{"data-slot":"badge",className:se(Ud({variant:e}),r),...s})}const Hd="modulepreload",zd=function(r){return"/"+r},po={},xr=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=zd(c),c in po)return;po[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Hd,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((g,p)=>{u.addEventListener("load",g),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return n.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},Wd=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>xr(async()=>{const{default:s}=await Promise.resolve().then(()=>Zt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Cn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Vd extends Cn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class go extends Cn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vo extends Cn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var en;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(en||(en={}));var qd=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class Kd{constructor(e,{headers:t={},customFetch:s,region:n=en.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Wd(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return qd(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:a}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const u=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:h}).catch(f=>{throw new Vd(f)}),g=u.headers.get("x-relay-error");if(g&&g==="true")throw new go(u);if(!u.ok)throw new vo(u);let p=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield u.json():p==="application/octet-stream"?y=yield u.blob():p==="text/event-stream"?y=u:p==="multipart/form-data"?y=yield u.formData():y=yield u.text(),{data:y,error:null,response:u}}catch(n){return{data:null,error:n,response:n instanceof vo||n instanceof go?n.context:void 0}}})}}var Ee={},Tn={},ss={},wr={},ns={},os={},Gd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yt=Gd();const Jd=Yt.fetch,Li=Yt.fetch.bind(Yt),Mi=Yt.Headers,Yd=Yt.Request,Xd=Yt.Response,Zt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mi,Request:Yd,Response:Xd,default:Li,fetch:Jd},Symbol.toStringTag,{value:"Module"})),Qd=cc(Zt);var is={};Object.defineProperty(is,"__esModule",{value:!0});let Zd=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};is.default=Zd;var Bi=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});const eu=Bi(Qd),tu=Bi(is);let ru=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=eu.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,c,d;let h=null,u=null,g=null,p=o.status,y=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?u=w:u=JSON.parse(w))}const v=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),b=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&b&&b.length>1&&(g=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(h={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,g=null,p=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await o.text();try{h=JSON.parse(v),Array.isArray(h)&&o.status===404&&(u=[],h=null,p=200,y="OK")}catch{o.status===404&&v===""?(p=204,y="No Content"):h={message:v}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,p=200,y="OK"),h&&this.shouldThrowOnError)throw new tu.default(h)}return{error:h,data:u,count:g,status:p,statusText:y}});return this.shouldThrowOnError||(n=n.catch(o=>{var a,l,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};os.default=ru;var su=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});const nu=su(os);let ou=class extends nu.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:o=n}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const o=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:o=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ns.default=ou;var iu=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wr,"__esModule",{value:!0});const au=iu(ns);let lu=class extends au.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${o}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};wr.default=lu;var cu=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});const ir=cu(wr);let du=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new ir.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var n;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ir.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:o=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new ir.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var s;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new ir.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ir.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};ss.default=du;var Fi=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tn,"__esModule",{value:!0});const uu=Fi(ss),hu=Fi(wr);let fu=class Ui{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new uu.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ui(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:o}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;s||n?(l=s?"HEAD":"GET",Object.entries(t).filter(([u,g])=>g!==void 0).map(([u,g])=>[u,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([u,g])=>{c.searchParams.append(u,g)})):(l="POST",d=t);const h=new Headers(this.headers);return o&&h.set("Prefer",`count=${o}`),new hu.default({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Tn.default=fu;var er=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const Hi=er(Tn);Ee.PostgrestClient=Hi.default;const zi=er(ss);Ee.PostgrestQueryBuilder=zi.default;const Wi=er(wr);Ee.PostgrestFilterBuilder=Wi.default;const Vi=er(ns);Ee.PostgrestTransformBuilder=Vi.default;const qi=er(os);Ee.PostgrestBuilder=qi.default;const Ki=er(is);Ee.PostgrestError=Ki.default;var mu=Ee.default={PostgrestClient:Hi.default,PostgrestQueryBuilder:zi.default,PostgrestFilterBuilder:Wi.default,PostgrestTransformBuilder:Vi.default,PostgrestBuilder:qi.default,PostgrestError:Ki.default};const{PostgrestClient:pu,PostgrestQueryBuilder:uy,PostgrestFilterBuilder:hy,PostgrestTransformBuilder:fy,PostgrestBuilder:my,PostgrestError:py}=mu;class gu{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const vu="2.15.4",yu=`realtime-js/${vu}`,bu="1.0.0",tn=1e4,xu=1e3,wu=100;var cr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(cr||(cr={}));var he;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(he||(he={}));var Fe;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Fe||(Fe={}));var rn;(function(r){r.websocket="websocket"})(rn||(rn={}));var kt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(kt||(kt={}));class _u{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),o=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+o));a=a+o;const d=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Gi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(ie||(ie={}));const yo=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((o,a)=>(o[a]=Su(a,r,e,n),o),{})},Su=(r,e,t,s)=>{const n=e.find(l=>l.name===r),o=n==null?void 0:n.type,a=t[r];return o&&!s.includes(o)?Ji(o,a):sn(a)},Ji=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Nu(e,t)}switch(r){case ie.bool:return ju(e);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return ku(e);case ie.json:case ie.jsonb:return Eu(e);case ie.timestamp:return Cu(e);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return sn(e);default:return sn(e)}},sn=r=>r,ju=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ku=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Eu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Nu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let o;const a=r.slice(1,t);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>Ji(e,l))}return r},Cu=r=>typeof r=="string"?r.replace(" ","T"):r,Yi=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Cs{constructor(e,t,s={},n=tn){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bo;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(bo||(bo={}));class dr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dr.syncState(this.state,n,o,a),this.pendingDiffs.forEach(c=>{this.state=dr.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=dr.syncDiff(this.state,n,o,a),l())}),this.onJoin((n,o,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:a})}),this.onLeave((n,o,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const o=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(o,(d,h)=>{a[d]||(c[d]=h)}),this.map(a,(d,h)=>{const u=o[d];if(u){const g=h.map(v=>v.presence_ref),p=u.map(v=>v.presence_ref),y=h.filter(v=>p.indexOf(v.presence_ref)<0),f=u.filter(v=>g.indexOf(v.presence_ref)<0);y.length>0&&(l[d]=y),f.length>0&&(c[d]=f)}else l[d]=h}),this.syncDiff(o,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:o,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const u=e[l].map(p=>p.presence_ref),g=h.filter(p=>u.indexOf(p.presence_ref)<0);e[l].unshift(...g)}s(l,h,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xo;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(xo||(xo={}));var ur;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ur||(ur={}));var et;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(et||(et={}));class An{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=he.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Cs(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new Gi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=he.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=he.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new dr(this),this.broadcastEndpointURL=Yi(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==he.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,d=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[ur.PRESENCE]&&this.bindings[ur.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,u={},g={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(et.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(et.CLOSED)),this.updateJoinPayload(Object.assign({config:g},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e==null||e(et.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,v=(y=f==null?void 0:f.length)!==null&&y!==void 0?y:0,b=[];for(let w=0;w<v;w++){const x=f[w],{filter:{event:_,schema:S,table:k,filter:j}}=x,A=p&&p[w];if(A&&A.event===_&&A.schema===S&&A.table===k&&A.filter===j)b.push(Object.assign(Object.assign({},x),{id:A.id}));else{this.unsubscribe(),this.state=he.errored,e==null||e(et.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(et.SUBSCRIBED);return}}).receive("error",p=>{this.state=he.errored,e==null||e(et.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(et.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===he.joined&&e===ur.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=he.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Cs(this,Fe.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=he.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(o),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Cs(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wu){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,o;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Fe;if(s&&[l,c,d,h].indexOf(a)>=0&&s!==this._joinRef())return;let g=this._onMessage(a,t,s);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var y,f,v;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(f=p.filter)===null||f===void 0?void 0:f.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(p=>p.callback(g,s)):(o=this.bindings[a])===null||o===void 0||o.filter(p=>{var y,f,v,b,w,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const _=p.id,S=(y=p.filter)===null||y===void 0?void 0:y.event;return _&&((f=t.ids)===null||f===void 0?void 0:f.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(w=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:f,table:v,commit_timestamp:b,type:w,errors:x}=y;g=Object.assign(Object.assign({},{schema:f,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:x}),this._getPayloadRecords(y))}p.callback(g,s)})}_isClosed(){return this.state===he.closed}_isJoined(){return this.state===he.joined}_isJoining(){return this.state===he.joining}_isLeaving(){return this.state===he.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),o={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&An.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fe.close,{},e)}_onError(e){this._on(Fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=he.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=yo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=yo(e.columns,e.old_record)),t}}const Ts=()=>{},Ar={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Tu=[1e3,2e3,5e3,1e4],Au=1e4,Pu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ru{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tn,this.transport=null,this.heartbeatIntervalMs=Ar.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ts,this.ref=0,this.reconnectTimer=null,this.logger=Ts,this.conn=null,this.sendBuffer=[],this.serializer=new _u,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>xr(async()=>{const{default:l}=await Promise.resolve().then(()=>Zt);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${rn.websocket}`,this.httpEndpoint=Yi(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gu.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bu}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case cr.connecting:return kt.Connecting;case cr.open:return kt.Open;case cr.closing:return kt.Closing;default:return kt.Closed}}isConnected(){return this.connectionState()===kt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new An(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:n,ref:o}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${o})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(xu,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ar.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:o,ref:a}=t,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${s} ${n} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(n,o,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Pu],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:yu};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Fe.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Gi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ar.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,o,a,l,c,d,h;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:tn,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Ar.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Ts,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:u=>Tu[u-1]||Au,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(u,g)=>g(JSON.stringify(u)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Pn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Iu extends Pn{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nn extends Pn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ou=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Xi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>xr(async()=>{const{default:s}=await Promise.resolve().then(()=>Zt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},$u=()=>Ou(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xr(()=>Promise.resolve().then(()=>Zt),void 0)).Response:Response}),on=r=>{if(Array.isArray(r))return r.map(t=>on(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[n]=on(s)}),e},Du=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Tt=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const As=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Lu=(r,e,t)=>Tt(void 0,void 0,void 0,function*(){const s=yield $u();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{const o=r.status||500,a=(n==null?void 0:n.statusCode)||o+"";e(new Iu(As(n),o,a))}).catch(n=>{e(new nn(As(n),n))}):e(new nn(As(r),r))}),Mu=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?n:(Du(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),t))};function _r(r,e,t,s,n,o){return Tt(this,void 0,void 0,function*(){return new Promise((a,l)=>{r(t,Mu(e,s,n,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Lu(c,l,s))})})}function Gr(r,e,t,s){return Tt(this,void 0,void 0,function*(){return _r(r,"GET",e,t,s)})}function Ve(r,e,t,s,n){return Tt(this,void 0,void 0,function*(){return _r(r,"POST",e,s,n,t)})}function an(r,e,t,s,n){return Tt(this,void 0,void 0,function*(){return _r(r,"PUT",e,s,n,t)})}function Bu(r,e,t,s){return Tt(this,void 0,void 0,function*(){return _r(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Qi(r,e,t,s,n){return Tt(this,void 0,void 0,function*(){return _r(r,"DELETE",e,s,n,t)})}var _e=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Fu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uu{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Xi(n)}uploadOrUpdate(e,t,s,n){return _e(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},wo),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),u=yield(e=="PUT"?an:Ve)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:u.Id,fullPath:u.Key},error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}upload(e,t,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return _e(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:wo.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const u=yield an(this.fetch,l.toString(),c,{headers:h});return{data:{path:o,fullPath:u.Key},error:null}}catch(c){if(fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return _e(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const o=yield Ve(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Pn("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}update(e,t,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return _e(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}copy(e,t,s){return _e(this,void 0,void 0,function*(){try{return{data:{path:(yield Ve(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return _e(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),o=yield Ve(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return _e(this,void 0,void 0,function*(){try{const n=yield Ve(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}download(e,t){return _e(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Gr(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(fe(l))return{data:null,error:l};throw l}})}info(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Gr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:on(s),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}exists(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Bu(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(fe(s)&&s instanceof nn){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&n.push(o);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}list(e,t,s){return _e(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Fu),t),{prefix:e||""});return{data:yield Ve(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}listV2(e,t){return _e(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ve(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Hu="2.11.0",zu={"X-Client-Info":`storage-js/${Hu}`};var Ot=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class Wu{constructor(e,t={},s,n){const o=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},zu),t),this.fetch=Xi(s)}listBuckets(){return Ot(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}getBucket(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ot(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Ot(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}}class Vu extends Wu{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new Uu(this.url,this.headers,e,this.fetch)}}const qu="2.56.1";let ar="";typeof Deno<"u"?ar="deno":typeof document<"u"?ar="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ar="react-native":ar="node";const Ku={"X-Client-Info":`supabase-js-${ar}/${qu}`},Gu={headers:Ku},Ju={schema:"public"},Yu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xu={};var Qu=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Zu=r=>{let e;return r?e=r:typeof fetch>"u"?e=Li:e=fetch,(...t)=>e(...t)},eh=()=>typeof Headers>"u"?Mi:Headers,th=(r,e,t)=>{const s=Zu(t),n=eh();return(o,a)=>Qu(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new n(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},a),{headers:d}))})};var rh=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};function sh(r){return r.endsWith("/")?r:r+"/"}function nh(r,e){var t,s;const{db:n,auth:o,realtime:a,global:l}=r,{db:c,auth:d,realtime:h,global:u}=e,g={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},(t=u==null?void 0:u.headers)!==null&&t!==void 0?t:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>rh(this,void 0,void 0,function*(){return""})};return r.accessToken?g.accessToken=r.accessToken:delete g.accessToken,g}const Zi="2.71.1",Ht=30*1e3,ln=3,Ps=ln*Ht,oh="http://localhost:9999",ih="supabase.auth.token",ah={"X-Client-Info":`gotrue-js/${Zi}`},cn="X-Supabase-Api-Version",ea={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ch=10*60*1e3;class Rn extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function F(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class dh extends Rn{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function uh(r){return F(r)&&r.name==="AuthApiError"}class ta extends Rn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class vt extends Rn{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class ct extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hh(r){return F(r)&&r.name==="AuthSessionMissingError"}class Pr extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rr extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ir extends vt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fh(r){return F(r)&&r.name==="AuthImplicitGrantRedirectError"}class _o extends vt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dn extends vt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rs(r){return F(r)&&r.name==="AuthRetryableFetchError"}class So extends vt{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class un extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jo=` 	
\r=`.split(""),mh=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<jo.length;e+=1)r[jo[e].charCodeAt(0)]=-2;for(let e=0;e<Jr.length;e+=1)r[Jr[e].charCodeAt(0)]=e;return r})();function ko(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Jr[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Jr[s]),e.queuedBits-=6}}function ra(r,e,t){const s=mh[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Eo(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=a=>{vh(a,s,t)};for(let a=0;a<r.length;a+=1)ra(r.charCodeAt(a),n,o);return e.join("")}function ph(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function gh(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}ph(s,e)}}function vh(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function yh(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)ra(r.charCodeAt(n),t,s);return new Uint8Array(e)}function bh(r){const e=[];return gh(r,t=>e.push(t)),new Uint8Array(e)}function xh(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>ko(n,t,s)),ko(null,t,s),e.join("")}function wh(r){return Math.round(Date.now()/1e3)+r}function _h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",_t={tested:!1,writable:!1},sa=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_t.tested)return _t.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),_t.tested=!0,_t.writable=!0}catch{_t.tested=!0,_t.writable=!1}return _t.writable};function Sh(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,o)=>{e[o]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const na=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>xr(async()=>{const{default:s}=await Promise.resolve().then(()=>Zt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},jh=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",zt=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},St=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},lt=async(r,e)=>{await r.removeItem(e)};class as{constructor(){this.promise=new as.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}as.promiseConstructor=Promise;function Is(r){const e=r.split(".");if(e.length!==3)throw new un("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!lh.test(e[s]))throw new un("JWT not in base64url format");return{header:JSON.parse(Eo(e[0])),payload:JSON.parse(Eo(e[1])),signature:yh(e[2]),raw:{header:e[0],payload:e[1]}}}async function kh(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Eh(r,e){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await r(o);if(!e(o,null,a)){s(a);return}}catch(a){if(!e(o,a)){n(a);return}}})()})}function Nh(r){return("0"+r.toString(16)).substr(-2)}function Ch(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let o=0;o<56;o++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Nh).join("")}async function Th(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Ah(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Th(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $t(r,e,t=!1){const s=Ch();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await zt(r,`${e}-code-verifier`,n);const o=await Ah(s);return[o,s===o?"plain":"s256"]}const Ph=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rh(r){const e=r.headers.get(cn);if(!e||!e.match(Ph))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ih(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Oh(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $h=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dt(r){if(!$h.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Os(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function No(r){return JSON.parse(JSON.stringify(r))}var Dh=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const jt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Lh=[502,503,504];async function Co(r){var e;if(!jh(r))throw new dn(jt(r),0);if(Lh.includes(r.status))throw new dn(jt(r),r.status);let t;try{t=await r.json()}catch(o){throw new ta(jt(o),o)}let s;const n=Rh(r);if(n&&n.getTime()>=ea["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new So(jt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ct}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new So(jt(t),r.status,t.weak_password.reasons);throw new dh(jt(t),r.status||500,s)}const Mh=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function q(r,e,t,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[cn]||(o[cn]=ea["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Bh(r,e,t+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Bh(r,e,t,s,n,o){const a=Mh(e,s,n,o);let l;try{l=await r(t,Object.assign({},a))}catch(c){throw console.error(c),new dn(jt(c),0)}if(l.ok||await Co(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Co(c)}}function Ze(r){var e;let t=null;zh(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=wh(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function To(r){const e=Ze(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ut(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Fh(r){return{data:r,error:null}}function Uh(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:o}=r,a=Dh(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Hh(r){return r}function zh(r){return r.access_token&&r.refresh_token&&r.expires_in}const $s=["global","local","others"];var Wh=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Vh{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=na(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=$s[0]){if($s.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$s.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ut})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Wh(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Uh,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(F(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ut})}catch(t){if(F(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,o,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:Hh});if(h.error)throw h.error;const u=await h.json(),g=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const f=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);d[`${v}Page`]=f}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(F(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Dt(e);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ut})}catch(t){if(F(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Dt(e);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ut})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Dt(e);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ut})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Dt(e.userId);try{const{data:t,error:s}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(F(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Dt(e.userId),Dt(e.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}}}function Ao(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function qh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Lt={debug:!!(globalThis&&sa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oa extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Kh extends oa{}async function Gh(r,e,t){Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw Lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Kh(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Lt.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}qh();const Jh={url:oh,storageKey:ih,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ah,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Po(r,e,t){return await t()}const Mt={};class pr{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pr.nextInstanceID,pr.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Jh),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Vh({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=na(n.fetch),this.lock=n.lock||Po,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Me()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Gh:this.lock=Po,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:sa()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ao(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Ao(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Mt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Mt[this.storageKey]=Object.assign(Object.assign({},Mt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Mt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mt[this.storageKey]=Object.assign(Object.assign({},Mt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Sh(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Me()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),fh(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return F(t)?{error:t}:{error:new ta("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const o=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ze}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(F(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,n;try{let o;if("email"in e){const{email:h,password:u,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await $t(this.storage,this.storageKey)),o=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:u,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},xform:Ze})}else if("phone"in e){const{phone:h,password:u,options:g}=e;o=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ze})}else throw new Rr("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(F(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:a,options:l}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:To})}else if("phone"in e){const{phone:o,password:a,options:l}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:To})}else throw new Rr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Pr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,o,a,l,c,d,h,u,g,p;let y,f;if("message"in e)y=e.message,f=e.signature;else{const{chain:v,wallet:b,statement:w,options:x}=e;let _;if(Me())if(typeof b=="object")_=b;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const S=new URL((t=x==null?void 0:x.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let j;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")j=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)j=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),f=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(n=(s=x==null?void 0:x.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((u=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||u===void 0)&&u.length?["Resources",...x.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=k}}try{const{data:v,error:b}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:xh(f)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ze});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Pr}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(F(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const t=await St(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ze});if(await lt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Pr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:a})}catch(o){if(F(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:o,nonce:a}=e,l=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ze}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,o,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await $t(this.storage,this.storageKey));const{error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Rr("You must provide either an email or phone number.")}catch(l){if(F(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,o;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:Ze});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(F(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await $t(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Fh})}catch(o){if(F(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ct;const{error:n}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(F(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:o}=e,{error:a}=await q(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:o}=e,{data:a,error:l}=await q(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Rr("You must provide either an email or phone number and a type")}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await St(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ps:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await St(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Os()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ut}):await this._useSession(async t=>{var s,n,o;const{data:a,error:l}=t;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ct}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:ut})})}catch(t){if(F(t))return hh(t)&&(await this._removeSession(),await lt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new ct;const a=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await $t(this.storage,this.storageKey));const{data:d,error:h}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:ut});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ct;const t=Date.now()/1e3;let s=t,n=!0,o=null;const{payload:a}=Is(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(F(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ct;const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Me())throw new Ir("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ir(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new _o("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ir("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _o("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!o||!l||!a||!d)throw new Ir("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(l);let g=h+u;c&&(g=parseInt(c));const p=g-h;p*1e3<=Ht&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${u}s`);const y=g-u;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,h);const{data:f,error:v}=await this._getUser(o);if(v)throw v;const b={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:u,expires_at:g,refresh_token:a,token_type:d,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(s){if(F(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await St(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:o}=t;if(o)return{error:o};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(uh(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await lt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=_h(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:o},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await $t(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(F(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async o=>{var a,l,c,d,h;const{data:u,error:g}=o;if(g)throw g;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return Me()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(F(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:o,error:a}=t;if(a)throw a;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Eh(async n=>(n>0&&await kh(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ze})),(n,o)=>{const a=200*Math.pow(2,n);return o&&Rs(o)&&Date.now()+a-s<Ht})}catch(s){if(this._debug(t,"error",s),F(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Me()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await St(this.storage,this.storageKey);if(n&&this.userStorage){let a=await St(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await zt(this.userStorage,this.storageKey+"-user",a)),n.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Os()}else if(n&&!n.user&&!n.user){const a=await St(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(n.user=a.user,await lt(this.storage,this.storageKey+"-user"),await zt(this.storage,this.storageKey,n)):n.user=Os()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ps;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Ps}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Rs(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(n.access_token);!l&&(a!=null&&a.user)?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ct;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new as;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new ct;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),F(o)){const a={session:null,error:o};return Rs(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await zt(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const o=No(n);await zt(this.storage,this.storageKey,o)}else{const n=No(t);await zt(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await lt(this.storage,this.storageKey),await lt(this.storage,this.storageKey+"-code-verifier"),await lt(this.storage,this.storageKey+"-user"),this.userStorage&&await lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ht);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Ht);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ht}ms, refresh threshold is ${ln} ticks`),n<=ln&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oa)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,a]=await $t(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:o}=t;return o?{data:null,error:o}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:o,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(F(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:o}=t;return o?{data:null,error:o}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(F(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Is(n.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+ch>n)return s;const{data:o,error:a}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};s=p.session.access_token}const{header:n,payload:o,signature:a,raw:{header:l,payload:c}}=Is(s);t!=null&&t.allowExpired||Ih(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:o,header:n,signature:a},error:null}}const h=Oh(n.alg),u=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,u,a,bh(`${l}.${c}`)))throw new un("Invalid JWT signature");return{data:{claims:o,header:n,signature:a},error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}}pr.nextInstanceID=0;const Yh=pr;class Xh extends Yh{constructor(e){super(e)}}var Qh=function(r,e,t,s){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(h){try{d(s.next(h))}catch(u){a(u)}}function c(h){try{d(s.throw(h))}catch(u){a(u)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class Zh{constructor(e,t,s){var n,o,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=sh(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:Ju,realtime:Xu,auth:Object.assign(Object.assign({},Yu),{storageKey:d}),global:Gu},u=nh(s??{},h);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(g,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=th(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new pu(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Vu(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Kd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Qh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:o,flowType:a,lock:l,debug:c},d,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xh({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ru(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ef=(r,e,t)=>new Zh(r,e,t);function tf(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}tf()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ia="vltpfknesnrxldcjnhdx",aa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZsdHBma25lc25yeGxkY2puaGR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0NDkwMzEsImV4cCI6MjA3MjAyNTAzMX0.r-PF1xcWPBQSJQaUHqoztCaLFji8ly8r9fS2imkmExA";ef(`https://${ia}.supabase.co`,aa);const be=async(r,e={})=>{const t=`https://${ia}.supabase.co/functions/v1/make-server-f2f8e889${r}`,s=localStorage.getItem("timetracker_access_token"),n=s&&!r.startsWith("/auth")?`Bearer ${s}`:`Bearer ${aa}`,o=await fetch(t,{...e,headers:{"Content-Type":"application/json",Authorization:n,...e.headers}});if(!o.ok){const a=await o.text();throw console.error(`API Error (${o.status}):`,a),new Error(`API Error: ${o.status} - ${a}`)}return o.json()},la=m.createContext(void 0),At=()=>{const r=m.useContext(la);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},rf=({children:r})=>{const[e,t]=m.useState(null),[s,n]=m.useState(null),[o,a]=m.useState(!0);m.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const g=localStorage.getItem("timetracker_access_token"),p=localStorage.getItem("timetracker_user");if(g&&p)try{const y=JSON.parse(p);n(g),t(y),(await be("/auth/verify",{headers:{Authorization:`Bearer ${g}`}})).success||(localStorage.removeItem("timetracker_access_token"),localStorage.removeItem("timetracker_user"),n(null),t(null))}catch(y){console.error("Error parsing stored user data:",y),localStorage.removeItem("timetracker_access_token"),localStorage.removeItem("timetracker_user")}}catch(g){console.error("Error checking session:",g)}finally{a(!1)}},c=async(g,p)=>{var y,f,v;try{a(!0);const b=await be("/auth/login",{method:"POST",body:JSON.stringify({email:g,password:p})});if(b.success&&b.user&&b.access_token){const w={id:b.user.id,email:b.user.email,firstName:((y=b.user.user_metadata)==null?void 0:y.firstName)||"",lastName:((f=b.user.user_metadata)==null?void 0:f.lastName)||"",avatar:((v=b.user.user_metadata)==null?void 0:v.avatar)||""};return t(w),n(b.access_token),localStorage.setItem("timetracker_access_token",b.access_token),localStorage.setItem("timetracker_user",JSON.stringify(w)),{success:!0}}else return{success:!1,error:b.error||"Error al iniciar sesión"}}catch(b){return console.error("Login error:",b),{success:!1,error:"Error de conexión. Inténtalo de nuevo."}}finally{a(!1)}},u={user:e,accessToken:s,loading:o,login:c,register:async(g,p,y,f)=>{try{a(!0);const v=await be("/auth/register",{method:"POST",body:JSON.stringify({email:g,password:p,firstName:y,lastName:f})});return v.success&&v.user?await c(g,p):{success:!1,error:v.error||"Error al crear la cuenta"}}catch(v){return console.error("Registration error:",v),{success:!1,error:"Error de conexión. Inténtalo de nuevo."}}finally{a(!1)}},logout:async()=>{try{s&&await be("/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${s}`}})}catch(g){console.error("Logout error:",g)}finally{t(null),n(null),localStorage.removeItem("timetracker_access_token"),localStorage.removeItem("timetracker_user")}},checkSession:l};return i.jsx(la.Provider,{value:u,children:r})};function sf(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const nf=r=>{switch(r){case"success":return lf;case"info":return df;case"warning":return cf;case"error":return uf;default:return null}},of=Array(12).fill(0),af=({visible:r,className:e})=>N.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},N.createElement("div",{className:"sonner-spinner"},of.map((t,s)=>N.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),lf=N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},N.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cf=N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},N.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),df=N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},N.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),uf=N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},N.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),hf=N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},N.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),N.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ff=()=>{const[r,e]=N.useState(document.hidden);return N.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let hn=1;class mf{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...n}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:hn++,a=this.toasts.find(c=>c.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(c=>c.id===o?(this.publish({...c,...e,id:o,title:s}),{...c,...e,id:o,dismissible:l,title:s}):c):this.addToast({title:s,...n,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let o=s!==void 0,a;const l=n.then(async d=>{if(a=["resolve",d],N.isValidElement(d))o=!1,this.create({id:s,type:"default",message:d});else if(gf(d)&&!d.ok){o=!1;const u=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,y=typeof u=="object"&&!N.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:g,...y})}else if(d instanceof Error){o=!1;const u=typeof t.error=="function"?await t.error(d):t.error,g=typeof t.description=="function"?await t.description(d):t.description,y=typeof u=="object"&&!N.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:g,...y})}else if(t.success!==void 0){o=!1;const u=typeof t.success=="function"?await t.success(d):t.success,g=typeof t.description=="function"?await t.description(d):t.description,y=typeof u=="object"&&!N.isValidElement(u)?u:{message:u};this.create({id:s,type:"success",description:g,...y})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){o=!1;const h=typeof t.error=="function"?await t.error(d):t.error,u=typeof t.description=="function"?await t.description(d):t.description,p=typeof h=="object"&&!N.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:u,...p})}}).finally(()=>{o&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((d,h)=>l.then(()=>a[0]==="reject"?h(a[1]):d(a[1])).catch(h));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(e,t)=>{const s=(t==null?void 0:t.id)||hn++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ke=new mf,pf=(r,e)=>{const t=(e==null?void 0:e.id)||hn++;return ke.addToast({title:r,...e,id:t}),t},gf=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",vf=pf,yf=()=>ke.toasts,bf=()=>ke.getActiveToasts(),Ge=Object.assign(vf,{success:ke.success,info:ke.info,warning:ke.warning,error:ke.error,custom:ke.custom,message:ke.message,promise:ke.promise,dismiss:ke.dismiss,loading:ke.loading},{getHistory:yf,getToasts:bf});sf("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Or(r){return r.label!==void 0}const xf=3,wf="24px",_f="16px",Ro=4e3,Sf=356,jf=14,kf=45,Ef=200;function ze(...r){return r.filter(Boolean).join(" ")}function Nf(r){const[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const Cf=r=>{var e,t,s,n,o,a,l,c,d;const{invert:h,toast:u,unstyled:g,interacting:p,setHeights:y,visibleToasts:f,heights:v,index:b,toasts:w,expanded:x,removeToast:_,defaultRichColors:S,closeButton:k,style:j,cancelButtonStyle:A,actionButtonStyle:B,className:T="",descriptionClassName:W="",duration:I,position:E,gap:P,expandByDefault:M,classNames:C,icons:$,closeButtonAriaLabel:R="Close toast"}=r,[O,V]=N.useState(null),[te,Re]=N.useState(null),[U,Z]=N.useState(!1),[re,ue]=N.useState(!1),[D,L]=N.useState(!1),[ce,Q]=N.useState(!1),[X,J]=N.useState(!1),[we,Se]=N.useState(0),[xt,nt]=N.useState(0),$e=N.useRef(u.duration||I||Ro),Er=N.useRef(null),je=N.useRef(null),Zl=b===0,ec=b+1<=f,Ne=u.type,Pt=u.dismissible!==!1,tc=u.className||"",rc=u.descriptionClassName||"",Nr=N.useMemo(()=>v.findIndex(H=>H.toastId===u.id)||0,[v,u.id]),sc=N.useMemo(()=>{var H;return(H=u.closeButton)!=null?H:k},[u.closeButton,k]),qn=N.useMemo(()=>u.duration||I||Ro,[u.duration,I]),bs=N.useRef(0),Rt=N.useRef(0),Kn=N.useRef(0),It=N.useRef(null),[nc,oc]=E.split("-"),Gn=N.useMemo(()=>v.reduce((H,ge,xe)=>xe>=Nr?H:H+ge.height,0),[v,Nr]),Jn=ff(),ic=u.invert||h,xs=Ne==="loading";Rt.current=N.useMemo(()=>Nr*P+Gn,[Nr,Gn]),N.useEffect(()=>{$e.current=qn},[qn]),N.useEffect(()=>{Z(!0)},[]),N.useEffect(()=>{const H=je.current;if(H){const ge=H.getBoundingClientRect().height;return nt(ge),y(xe=>[{toastId:u.id,height:ge,position:u.position},...xe]),()=>y(xe=>xe.filter(Ce=>Ce.toastId!==u.id))}},[y,u.id]),N.useLayoutEffect(()=>{if(!U)return;const H=je.current,ge=H.style.height;H.style.height="auto";const xe=H.getBoundingClientRect().height;H.style.height=ge,nt(xe),y(Ce=>Ce.find(ve=>ve.toastId===u.id)?Ce.map(ve=>ve.toastId===u.id?{...ve,height:xe}:ve):[{toastId:u.id,height:xe,position:u.position},...Ce])},[U,u.title,u.description,y,u.id,u.jsx,u.action,u.cancel]);const ot=N.useCallback(()=>{ue(!0),Se(Rt.current),y(H=>H.filter(ge=>ge.toastId!==u.id)),setTimeout(()=>{_(u)},Ef)},[u,_,y,Rt]);N.useEffect(()=>{if(u.promise&&Ne==="loading"||u.duration===1/0||u.type==="loading")return;let H;return x||p||Jn?(()=>{if(Kn.current<bs.current){const Ce=new Date().getTime()-bs.current;$e.current=$e.current-Ce}Kn.current=new Date().getTime()})():(()=>{$e.current!==1/0&&(bs.current=new Date().getTime(),H=setTimeout(()=>{u.onAutoClose==null||u.onAutoClose.call(u,u),ot()},$e.current))})(),()=>clearTimeout(H)},[x,p,u,Ne,Jn,ot]),N.useEffect(()=>{u.delete&&(ot(),u.onDismiss==null||u.onDismiss.call(u,u))},[ot,u.delete]);function ac(){var H;if($!=null&&$.loading){var ge;return N.createElement("div",{className:ze(C==null?void 0:C.loader,u==null||(ge=u.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":Ne==="loading"},$.loading)}return N.createElement(af,{className:ze(C==null?void 0:C.loader,u==null||(H=u.classNames)==null?void 0:H.loader),visible:Ne==="loading"})}const lc=u.icon||($==null?void 0:$[Ne])||nf(Ne);var Yn,Xn;return N.createElement("li",{tabIndex:0,ref:je,className:ze(T,tc,C==null?void 0:C.toast,u==null||(e=u.classNames)==null?void 0:e.toast,C==null?void 0:C.default,C==null?void 0:C[Ne],u==null||(t=u.classNames)==null?void 0:t[Ne]),"data-sonner-toast":"","data-rich-colors":(Yn=u.richColors)!=null?Yn:S,"data-styled":!(u.jsx||u.unstyled||g),"data-mounted":U,"data-promise":!!u.promise,"data-swiped":X,"data-removed":re,"data-visible":ec,"data-y-position":nc,"data-x-position":oc,"data-index":b,"data-front":Zl,"data-swiping":D,"data-dismissible":Pt,"data-type":Ne,"data-invert":ic,"data-swipe-out":ce,"data-swipe-direction":te,"data-expanded":!!(x||M&&U),"data-testid":u.testId,style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${re?we:Rt.current}px`,"--initial-height":M?"auto":`${xt}px`,...j,...u.style},onDragEnd:()=>{L(!1),V(null),It.current=null},onPointerDown:H=>{H.button!==2&&(xs||!Pt||(Er.current=new Date,Se(Rt.current),H.target.setPointerCapture(H.pointerId),H.target.tagName!=="BUTTON"&&(L(!0),It.current={x:H.clientX,y:H.clientY})))},onPointerUp:()=>{var H,ge,xe;if(ce||!Pt)return;It.current=null;const Ce=Number(((H=je.current)==null?void 0:H.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Cr=Number(((ge=je.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ve=new Date().getTime()-((xe=Er.current)==null?void 0:xe.getTime()),Ie=O==="x"?Ce:Cr,Tr=Math.abs(Ie)/ve;if(Math.abs(Ie)>=kf||Tr>.11){Se(Rt.current),u.onDismiss==null||u.onDismiss.call(u,u),Re(O==="x"?Ce>0?"right":"left":Cr>0?"down":"up"),ot(),Q(!0);return}else{var De,Le;(De=je.current)==null||De.style.setProperty("--swipe-amount-x","0px"),(Le=je.current)==null||Le.style.setProperty("--swipe-amount-y","0px")}J(!1),L(!1),V(null)},onPointerMove:H=>{var ge,xe,Ce;if(!It.current||!Pt||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;const ve=H.clientY-It.current.y,Ie=H.clientX-It.current.x;var Tr;const De=(Tr=r.swipeDirections)!=null?Tr:Nf(E);!O&&(Math.abs(Ie)>1||Math.abs(ve)>1)&&V(Math.abs(Ie)>Math.abs(ve)?"x":"y");let Le={x:0,y:0};const Qn=wt=>1/(1.5+Math.abs(wt)/20);if(O==="y"){if(De.includes("top")||De.includes("bottom"))if(De.includes("top")&&ve<0||De.includes("bottom")&&ve>0)Le.y=ve;else{const wt=ve*Qn(ve);Le.y=Math.abs(wt)<Math.abs(ve)?wt:ve}}else if(O==="x"&&(De.includes("left")||De.includes("right")))if(De.includes("left")&&Ie<0||De.includes("right")&&Ie>0)Le.x=Ie;else{const wt=Ie*Qn(Ie);Le.x=Math.abs(wt)<Math.abs(Ie)?wt:Ie}(Math.abs(Le.x)>0||Math.abs(Le.y)>0)&&J(!0),(xe=je.current)==null||xe.style.setProperty("--swipe-amount-x",`${Le.x}px`),(Ce=je.current)==null||Ce.style.setProperty("--swipe-amount-y",`${Le.y}px`)}},sc&&!u.jsx&&Ne!=="loading"?N.createElement("button",{"aria-label":R,"data-disabled":xs,"data-close-button":!0,onClick:xs||!Pt?()=>{}:()=>{ot(),u.onDismiss==null||u.onDismiss.call(u,u)},className:ze(C==null?void 0:C.closeButton,u==null||(s=u.classNames)==null?void 0:s.closeButton)},(Xn=$==null?void 0:$.close)!=null?Xn:hf):null,(Ne||u.icon||u.promise)&&u.icon!==null&&(($==null?void 0:$[Ne])!==null||u.icon)?N.createElement("div",{"data-icon":"",className:ze(C==null?void 0:C.icon,u==null||(n=u.classNames)==null?void 0:n.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||ac():null,u.type!=="loading"?lc:null):null,N.createElement("div",{"data-content":"",className:ze(C==null?void 0:C.content,u==null||(o=u.classNames)==null?void 0:o.content)},N.createElement("div",{"data-title":"",className:ze(C==null?void 0:C.title,u==null||(a=u.classNames)==null?void 0:a.title)},u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title),u.description?N.createElement("div",{"data-description":"",className:ze(W,rc,C==null?void 0:C.description,u==null||(l=u.classNames)==null?void 0:l.description)},typeof u.description=="function"?u.description():u.description):null),N.isValidElement(u.cancel)?u.cancel:u.cancel&&Or(u.cancel)?N.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||A,onClick:H=>{Or(u.cancel)&&Pt&&(u.cancel.onClick==null||u.cancel.onClick.call(u.cancel,H),ot())},className:ze(C==null?void 0:C.cancelButton,u==null||(c=u.classNames)==null?void 0:c.cancelButton)},u.cancel.label):null,N.isValidElement(u.action)?u.action:u.action&&Or(u.action)?N.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||B,onClick:H=>{Or(u.action)&&(u.action.onClick==null||u.action.onClick.call(u.action,H),!H.defaultPrevented&&ot())},className:ze(C==null?void 0:C.actionButton,u==null||(d=u.classNames)==null?void 0:d.actionButton)},u.action.label):null)};function Io(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function Tf(r,e){const t={};return[r,e].forEach((s,n)=>{const o=n===1,a=o?"--mobile-offset":"--offset",l=o?_f:wf;function c(d){["top","right","bottom","left"].forEach(h=>{t[`${a}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?t[`${a}-${d}`]=l:t[`${a}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),t}const Af=N.forwardRef(function(e,t){const{id:s,invert:n,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:h,mobileOffset:u,theme:g="light",richColors:p,duration:y,style:f,visibleToasts:v=xf,toastOptions:b,dir:w=Io(),gap:x=jf,icons:_,containerAriaLabel:S="Notifications"}=e,[k,j]=N.useState([]),A=N.useMemo(()=>s?k.filter(U=>U.toasterId===s):k.filter(U=>!U.toasterId),[k,s]),B=N.useMemo(()=>Array.from(new Set([o].concat(A.filter(U=>U.position).map(U=>U.position)))),[A,o]),[T,W]=N.useState([]),[I,E]=N.useState(!1),[P,M]=N.useState(!1),[C,$]=N.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=N.useRef(null),O=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=N.useRef(null),te=N.useRef(!1),Re=N.useCallback(U=>{j(Z=>{var re;return(re=Z.find(ue=>ue.id===U.id))!=null&&re.delete||ke.dismiss(U.id),Z.filter(({id:ue})=>ue!==U.id)})},[]);return N.useEffect(()=>ke.subscribe(U=>{if(U.dismiss){requestAnimationFrame(()=>{j(Z=>Z.map(re=>re.id===U.id?{...re,delete:!0}:re))});return}setTimeout(()=>{ui.flushSync(()=>{j(Z=>{const re=Z.findIndex(ue=>ue.id===U.id);return re!==-1?[...Z.slice(0,re),{...Z[re],...U},...Z.slice(re+1)]:[U,...Z]})})})}),[k]),N.useEffect(()=>{if(g!=="system"){$(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const U=window.matchMedia("(prefers-color-scheme: dark)");try{U.addEventListener("change",({matches:Z})=>{$(Z?"dark":"light")})}catch{U.addListener(({matches:re})=>{try{$(re?"dark":"light")}catch(ue){console.error(ue)}})}},[g]),N.useEffect(()=>{k.length<=1&&E(!1)},[k]),N.useEffect(()=>{const U=Z=>{var re;if(a.every(L=>Z[L]||Z.code===L)){var D;E(!0),(D=R.current)==null||D.focus()}Z.code==="Escape"&&(document.activeElement===R.current||(re=R.current)!=null&&re.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[a]),N.useEffect(()=>{if(R.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,te.current=!1)}},[R.current]),N.createElement("section",{ref:t,"aria-label":`${S} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},B.map((U,Z)=>{var re;const[ue,D]=U.split("-");return A.length?N.createElement("ol",{key:U,dir:w==="auto"?Io():w,tabIndex:-1,ref:R,className:d,"data-sonner-toaster":!0,"data-sonner-theme":C,"data-y-position":ue,"data-x-position":D,style:{"--front-toast-height":`${((re=T[0])==null?void 0:re.height)||0}px`,"--width":`${Sf}px`,"--gap":`${x}px`,...f,...Tf(h,u)},onBlur:L=>{te.current&&!L.currentTarget.contains(L.relatedTarget)&&(te.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||te.current||(te.current=!0,V.current=L.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{P||E(!1)},onDragEnd:()=>E(!1),onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},A.filter(L=>!L.position&&Z===0||L.position===U).map((L,ce)=>{var Q,X;return N.createElement(Cf,{key:L.id,icons:_,index:ce,toast:L,defaultRichColors:p,duration:(Q=b==null?void 0:b.duration)!=null?Q:y,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:n,visibleToasts:v,closeButton:(X=b==null?void 0:b.closeButton)!=null?X:c,interacting:P,position:U,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,closeButtonAriaLabel:b==null?void 0:b.closeButtonAriaLabel,removeToast:Re,toasts:A.filter(J=>J.position==L.position),heights:T.filter(J=>J.position==L.position),setHeights:W,expandByDefault:l,gap:x,expanded:I,swipeDirections:e.swipeDirections})})):null}))});function Pf({activeTab:r,onTabChange:e}){const[t,s]=m.useState(!1),{user:n,logout:o}=At(),a=async()=>{try{await o(),Ge.success("Sesión cerrada correctamente")}catch{Ge.error("Error al cerrar sesión")}},l=(u,g)=>!u&&!g?"U":`${(u==null?void 0:u.charAt(0))||""}${(g==null?void 0:g.charAt(0))||""}`.toUpperCase(),c=()=>{var u;return n!=null&&n.firstName&&(n!=null&&n.lastName)?`${n.firstName} ${n.lastName}`:((u=n==null?void 0:n.email)==null?void 0:u.split("@")[0])||"Usuario"},d=[{id:"dashboard",label:"Dashboard",icon:gc},{id:"history",label:"Historial",icon:Ae},{id:"analytics",label:"Estadísticas",icon:vc},{id:"calendar",label:"Calendario",icon:ft}],h=[{id:"profile",label:"Perfil",icon:qr},{id:"settings",label:"Configuración",icon:Hr}];return i.jsxs(K,{className:`h-full flex flex-col transition-all duration-300 ${t?"w-16":"w-64"}`,children:[i.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[!t&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 bg-primary rounded-md flex items-center justify-center",children:i.jsx(Ae,{className:"h-4 w-4 text-primary-foreground"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold",children:"TimeTracker"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Control horario"})]})]}),i.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>s(!t),className:"h-8 w-8 p-0",children:t?i.jsx(Ys,{className:"h-4 w-4"}):i.jsx(Xs,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"p-4 border-b",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Oi,{className:"h-10 w-10",children:[i.jsx($i,{src:n==null?void 0:n.avatar}),i.jsx(Di,{children:l(n==null?void 0:n.firstName,n==null?void 0:n.lastName)})]}),!t&&i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium truncate",children:c()}),i.jsx("p",{className:"text-sm text-muted-foreground truncate",children:n==null?void 0:n.email}),i.jsx(ht,{variant:"secondary",className:"text-xs mt-1",children:"Activo"})]})]})}),i.jsx("nav",{className:"flex-1 p-2",children:i.jsx("div",{className:"space-y-1",children:d.map(u=>{const g=u.icon,p=r===u.id;return i.jsxs(ye,{variant:p?"default":"ghost",className:`w-full justify-start h-10 ${t?"px-0 justify-center":"px-3"}`,onClick:()=>e(u.id),children:[i.jsx(g,{className:"h-4 w-4"}),!t&&i.jsx("span",{className:"ml-3",children:u.label})]},u.id)})})}),i.jsx("div",{className:"p-2 border-t",children:i.jsxs("div",{className:"space-y-1",children:[h.map(u=>{const g=u.icon;return i.jsxs(ye,{variant:"ghost",className:`w-full justify-start h-10 ${t?"px-0 justify-center":"px-3"}`,onClick:()=>e(u.id),children:[i.jsx(g,{className:"h-4 w-4"}),!t&&i.jsx("span",{className:"ml-3",children:u.label})]},u.id)}),i.jsxs(ye,{variant:"ghost",className:`w-full justify-start h-10 text-destructive hover:text-destructive hover:bg-destructive/10 ${t?"px-0 justify-center":"px-3"}`,onClick:a,children:[i.jsx(yc,{className:"h-4 w-4"}),!t&&i.jsx("span",{className:"ml-3",children:"Cerrar Sesión"})]})]})})]})}const ca=m.createContext(void 0),ls=()=>{const r=m.useContext(ca);if(r===void 0)throw new Error("useRefresh must be used within a RefreshProvider");return r},Rf=({children:r})=>{const[e,t]=m.useState(0),s=()=>{t(n=>n+1)};return i.jsx(ca.Provider,{value:{refreshHistory:e,triggerHistoryRefresh:s},children:r})};function Oo(){const{user:r}=At(),{triggerHistoryRefresh:e}=ls(),[t,s]=m.useState(new Date),[n,o]=m.useState(!1),[a,l]=m.useState(null),[c,d]=m.useState(0),[h,u]=m.useState(0),[g,p]=m.useState(0),[y,f]=m.useState(0),[v,b]=m.useState(0),[w,x]=m.useState(!1);m.useEffect(()=>{const T=setInterval(()=>{s(new Date)},1e3);return()=>clearInterval(T)},[]),m.useEffect(()=>{_(),S()},[]);const _=async()=>{if(r)try{const T=await be(`/time-entries/today?userId=${r.id}`);T.success&&T.entry&&(l(T.entry),o(T.entry.status==="checked_in"))}catch(T){console.error("Error loading today entry:",T)}},S=async()=>{if(r)try{const T=await be(`/analytics?userId=${r.id}`);T.success&&(d(T.analytics.weeklyHours),u(T.analytics.monthlyHours),p(T.analytics.weeklyChange),f(T.analytics.weeklyCompletion),b(T.analytics.monthlyCompletion))}catch(T){console.error("Error loading analytics:",T)}},k=async()=>{if(!(w||!r)){x(!0);try{const T=await be("/time-entries",{method:"POST",body:JSON.stringify({action:"check_in",userId:r.id})});T.success?(l(T.entry),o(!0),await S(),e()):console.error("Check-in failed:",T.error)}catch(T){console.error("Error during check-in:",T)}finally{x(!1)}}},j=async()=>{if(!(w||!r)){x(!0);try{const T=await be("/time-entries",{method:"POST",body:JSON.stringify({action:"check_out",userId:r.id})});T.success?(l(T.entry),o(!1),await S(),e()):console.error("Check-out failed:",T.error)}catch(T){console.error("Error during check-out:",T)}finally{x(!1)}}},A=T=>T.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),B=T=>T.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Control de Horario"}),i.jsx("p",{className:"text-muted-foreground",children:B(t)}),i.jsx("div",{className:"text-4xl font-mono font-bold text-primary",children:A(t)})]}),i.jsxs(K,{className:"mx-auto max-w-md",children:[i.jsx(oe,{className:"text-center",children:i.jsxs(le,{className:"flex items-center justify-center gap-2",children:[i.jsx(Wt,{className:"h-5 w-5"}),"Estado Actual"]})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsx("div",{className:"text-center",children:i.jsx(ht,{variant:n?"default":"secondary",className:"text-sm px-4 py-2",children:n?"Trabajando":"Fuera del trabajo"})}),a&&i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Entrada:"}),i.jsx("span",{className:"font-mono",children:new Date(a.checkIn).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),a.checkOut&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Salida:"}),i.jsx("span",{className:"font-mono",children:new Date(a.checkOut).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{className:"flex justify-between font-medium",children:[i.jsx("span",{children:"Horas trabajadas:"}),i.jsxs("span",{children:[a.totalHours,"h"]})]})]})]}),i.jsx("div",{className:"flex gap-2",children:n?i.jsxs(ye,{onClick:j,variant:"outline",className:"flex-1",size:"lg",disabled:w,children:[w?i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Ae,{className:"h-4 w-4 mr-2"}),w?"Procesando...":"Fichar Salida"]}):i.jsxs(ye,{onClick:k,className:"flex-1",size:"lg",disabled:w,children:[w?i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Ae,{className:"h-4 w-4 mr-2"}),w?"Procesando...":"Fichar Entrada"]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Hoy"}),i.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[(a==null?void 0:a.totalHours)||0,"h"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Horas trabajadas hoy"})]})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Esta Semana"}),i.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[c,"h"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[g>=0?"+":"",g,"h desde la semana pasada",i.jsx("br",{}),"Meta: 40h (",y,"% completado)"]})]})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Este Mes"}),i.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[h,"h"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Meta: 160h (",v,"% completado)"]})]})]})]})]})}function If(){const{user:r}=At(),{refreshHistory:e}=ls(),[t,s]=m.useState([]),[n,o]=m.useState(!0),[a,l]=m.useState({totalHours:0,completeDays:0,averageDaily:0,compliance:0});m.useEffect(()=>{r&&c()},[r]),m.useEffect(()=>{e>0&&r&&c()},[e]);const c=async()=>{if(r)try{o(!0);const p=await be(`/time-entries/history?userId=${r.id}`);p.success&&(s(p.entries||[]),d(p.entries||[]))}catch(p){console.error("Error loading history:",p)}finally{o(!1)}},d=p=>{const y=p.filter(_=>_.totalHours),f=y.reduce((_,S)=>_+(S.totalHours||0),0),v=y.length,b=v>0?f/v:0,x=f/40*100;l({totalHours:Math.round(f*10)/10,completeDays:v,averageDaily:Math.round(b*10)/10,compliance:Math.round(x)})},h=p=>new Date(p).toLocaleDateString("es-ES",{weekday:"short",day:"2-digit",month:"2-digit"}),u=p=>new Date(p).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),g=p=>p.status==="completed"&&p.totalHours?i.jsx(ht,{variant:"default",className:"text-xs",children:"Completo"}):p.status==="checked_in"?i.jsx(ht,{variant:"secondary",className:"text-xs",children:"En progreso"}):i.jsx(ht,{variant:"destructive",className:"text-xs",children:"Incompleto"});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Historial de Registros"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(ft,{className:"h-4 w-4"}),"Últimos 7 días"]})]}),n?i.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(p=>i.jsx(K,{className:"animate-pulse",children:i.jsx(Y,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-12 bg-muted rounded"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("div",{className:"w-16 h-8 bg-muted rounded"}),i.jsx("div",{className:"w-16 h-8 bg-muted rounded"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-8 bg-muted rounded"}),i.jsx("div",{className:"w-20 h-6 bg-muted rounded"})]})]})})},p))}):t.length===0?i.jsx(K,{className:"text-center py-8",children:i.jsxs(Y,{children:[i.jsx(Wt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"font-medium mb-2",children:"Sin registros de tiempo"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza a fichar para ver tu historial aquí"})]})}):i.jsx("div",{className:"space-y-3",children:t.map(p=>i.jsx(K,{className:"transition-all hover:shadow-md",children:i.jsx(Y,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center min-w-[80px]",children:[i.jsx("div",{className:"font-medium",children:h(p.date)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(p.date).toLocaleDateString("es-ES",{month:"short",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-mono",children:u(p.checkIn)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Entrada"})]})]}),p.checkOut?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-mono",children:u(p.checkOut)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Salida"})]})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ae,{className:"h-4 w-4 text-muted-foreground opacity-50"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-muted-foreground",children:"--:--"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Salida"})]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[p.totalHours?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wt,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-medium",children:[p.totalHours,"h"]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wt,{className:"h-4 w-4 text-muted-foreground opacity-50"}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-muted-foreground",children:"-"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),g(p)]})]})})},p.id))}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{className:"text-lg",children:"Resumen Semanal"})}),i.jsx(Y,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[a.totalHours,"h"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total trabajadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold",children:a.completeDays}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Días completos"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[a.averageDaily,"h"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Promedio diario"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[a.compliance,"%"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cumplimiento"})]})]})})]})]})}function ee(r,e,{checkForDefaultPrevented:t=!0}={}){return function(n){if(r==null||r(n),t===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function da(r){const e=r+"CollectionProvider",[t,s]=gt(e),[n,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=f=>{const{scope:v,children:b}=f,w=N.useRef(null),x=N.useRef(new Map).current;return i.jsx(n,{scope:v,itemMap:x,collectionRef:w,children:b})};a.displayName=e;const l=r+"CollectionSlot",c=mr(l),d=N.forwardRef((f,v)=>{const{scope:b,children:w}=f,x=o(l,b),_=de(v,x.collectionRef);return i.jsx(c,{ref:_,children:w})});d.displayName=l;const h=r+"CollectionItemSlot",u="data-radix-collection-item",g=mr(h),p=N.forwardRef((f,v)=>{const{scope:b,children:w,...x}=f,_=N.useRef(null),S=de(v,_),k=o(h,b);return N.useEffect(()=>(k.itemMap.set(_,{ref:_,...x}),()=>void k.itemMap.delete(_))),i.jsx(g,{[u]:"",ref:S,children:w})});p.displayName=h;function y(f){const v=o(r+"CollectionConsumer",f);return N.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((k,j)=>x.indexOf(k.ref.current)-x.indexOf(j.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:d,ItemSlot:p},y,s]}var Of=hi[" useId ".trim().toString()]||(()=>{}),$f=0;function Sr(r){const[e,t]=m.useState(Of());return pe(()=>{t(s=>s??String($f++))},[r]),r||(e?`radix-${e}`:"")}var Df=hi[" useInsertionEffect ".trim().toString()]||pe;function gr({prop:r,defaultProp:e,onChange:t=()=>{},caller:s}){const[n,o,a]=Lf({defaultProp:e,onChange:t}),l=r!==void 0,c=l?r:n;{const h=m.useRef(r!==void 0);m.useEffect(()=>{const u=h.current;u!==l&&console.warn(`${s} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,s])}const d=m.useCallback(h=>{var u;if(l){const g=Mf(h)?h(r):h;g!==r&&((u=a.current)==null||u.call(a,g))}else o(h)},[l,r,o,a]);return[c,d]}function Lf({defaultProp:r,onChange:e}){const[t,s]=m.useState(r),n=m.useRef(t),o=m.useRef(e);return Df(()=>{o.current=e},[e]),m.useEffect(()=>{var a;n.current!==t&&((a=o.current)==null||a.call(o,t),n.current=t)},[t,n]),[t,s,o]}function Mf(r){return typeof r=="function"}var Bf=m.createContext(void 0);function In(r){const e=m.useContext(Bf);return r||e||"ltr"}var Ds="rovingFocusGroup.onEntryFocus",Ff={bubbles:!1,cancelable:!0},jr="RovingFocusGroup",[fn,ua,Uf]=da(jr),[Hf,ha]=gt(jr,[Uf]),[zf,Wf]=Hf(jr),fa=m.forwardRef((r,e)=>i.jsx(fn.Provider,{scope:r.__scopeRovingFocusGroup,children:i.jsx(fn.Slot,{scope:r.__scopeRovingFocusGroup,children:i.jsx(Vf,{...r,ref:e})})}));fa.displayName=jr;var Vf=m.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:n=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...u}=r,g=m.useRef(null),p=de(e,g),y=In(o),[f,v]=gr({prop:a,defaultProp:l??null,onChange:c,caller:jr}),[b,w]=m.useState(!1),x=tt(d),_=ua(t),S=m.useRef(!1),[k,j]=m.useState(0);return m.useEffect(()=>{const A=g.current;if(A)return A.addEventListener(Ds,x),()=>A.removeEventListener(Ds,x)},[x]),i.jsx(zf,{scope:t,orientation:s,dir:y,loop:n,currentTabStopId:f,onItemFocus:m.useCallback(A=>v(A),[v]),onItemShiftTab:m.useCallback(()=>w(!0),[]),onFocusableItemAdd:m.useCallback(()=>j(A=>A+1),[]),onFocusableItemRemove:m.useCallback(()=>j(A=>A-1),[]),children:i.jsx(G.div,{tabIndex:b||k===0?-1:0,"data-orientation":s,...u,ref:p,style:{outline:"none",...r.style},onMouseDown:ee(r.onMouseDown,()=>{S.current=!0}),onFocus:ee(r.onFocus,A=>{const B=!S.current;if(A.target===A.currentTarget&&B&&!b){const T=new CustomEvent(Ds,Ff);if(A.currentTarget.dispatchEvent(T),!T.defaultPrevented){const W=_().filter(C=>C.focusable),I=W.find(C=>C.active),E=W.find(C=>C.id===f),M=[I,E,...W].filter(Boolean).map(C=>C.ref.current);ga(M,h)}}S.current=!1}),onBlur:ee(r.onBlur,()=>w(!1))})})}),ma="RovingFocusGroupItem",pa=m.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:n=!1,tabStopId:o,children:a,...l}=r,c=Sr(),d=o||c,h=Wf(ma,t),u=h.currentTabStopId===d,g=ua(t),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:f}=h;return m.useEffect(()=>{if(s)return p(),()=>y()},[s,p,y]),i.jsx(fn.ItemSlot,{scope:t,id:d,focusable:s,active:n,children:i.jsx(G.span,{tabIndex:u?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ee(r.onMouseDown,v=>{s?h.onItemFocus(d):v.preventDefault()}),onFocus:ee(r.onFocus,()=>h.onItemFocus(d)),onKeyDown:ee(r.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){h.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=Gf(v,h.orientation,h.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=g().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")x.reverse();else if(b==="prev"||b==="next"){b==="prev"&&x.reverse();const _=x.indexOf(v.currentTarget);x=h.loop?Jf(x,_+1):x.slice(_+1)}setTimeout(()=>ga(x))}}),children:typeof a=="function"?a({isCurrentTabStop:u,hasTabStop:f!=null}):a})})});pa.displayName=ma;var qf={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Kf(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function Gf(r,e,t){const s=Kf(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return qf[s]}function ga(r,e=!1){const t=document.activeElement;for(const s of r)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function Jf(r,e){return r.map((t,s)=>r[(e+s)%r.length])}var Yf=fa,Xf=pa;function Qf(r,e){return m.useReducer((t,s)=>e[t][s]??t,r)}var va=r=>{const{present:e,children:t}=r,s=Zf(e),n=typeof t=="function"?t({present:s.isPresent}):m.Children.only(t),o=de(s.ref,em(n));return typeof t=="function"||s.isPresent?m.cloneElement(n,{ref:o}):null};va.displayName="Presence";function Zf(r){const[e,t]=m.useState(),s=m.useRef(null),n=m.useRef(r),o=m.useRef("none"),a=r?"mounted":"unmounted",[l,c]=Qf(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=$r(s.current);o.current=l==="mounted"?d:"none"},[l]),pe(()=>{const d=s.current,h=n.current;if(h!==r){const g=o.current,p=$r(d);r?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&g!==p?"ANIMATION_OUT":"UNMOUNT"),n.current=r}},[r,c]),pe(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,u=p=>{const f=$r(s.current).includes(CSS.escape(p.animationName));if(p.target===e&&f&&(c("ANIMATION_END"),!n.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},g=p=>{p.target===e&&(o.current=$r(s.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(d=>{s.current=d?getComputedStyle(d):null,t(d)},[])}}function $r(r){return(r==null?void 0:r.animationName)||"none"}function em(r){var s,n;let e=(s=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(n=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var cs="Tabs",[tm,gy]=gt(cs,[ha]),ya=ha(),[rm,On]=tm(cs),ba=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,onValueChange:n,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=r,h=In(l),[u,g]=gr({prop:s,onChange:n,defaultProp:o??"",caller:cs});return i.jsx(rm,{scope:t,baseId:Sr(),value:u,onValueChange:g,orientation:a,dir:h,activationMode:c,children:i.jsx(G.div,{dir:h,"data-orientation":a,...d,ref:e})})});ba.displayName=cs;var xa="TabsList",wa=m.forwardRef((r,e)=>{const{__scopeTabs:t,loop:s=!0,...n}=r,o=On(xa,t),a=ya(t);return i.jsx(Yf,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:s,children:i.jsx(G.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:e})})});wa.displayName=xa;var _a="TabsTrigger",Sa=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,disabled:n=!1,...o}=r,a=On(_a,t),l=ya(t),c=Ea(a.baseId,s),d=Na(a.baseId,s),h=s===a.value;return i.jsx(Xf,{asChild:!0,...l,focusable:!n,active:h,children:i.jsx(G.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...o,ref:e,onMouseDown:ee(r.onMouseDown,u=>{!n&&u.button===0&&u.ctrlKey===!1?a.onValueChange(s):u.preventDefault()}),onKeyDown:ee(r.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&a.onValueChange(s)}),onFocus:ee(r.onFocus,()=>{const u=a.activationMode!=="manual";!h&&!n&&u&&a.onValueChange(s)})})})});Sa.displayName=_a;var ja="TabsContent",ka=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,forceMount:n,children:o,...a}=r,l=On(ja,t),c=Ea(l.baseId,s),d=Na(l.baseId,s),h=s===l.value,u=m.useRef(h);return m.useEffect(()=>{const g=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(g)},[]),i.jsx(va,{present:n||h,children:({present:g})=>i.jsx(G.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!g,id:d,tabIndex:0,...a,ref:e,style:{...r.style,animationDuration:u.current?"0s":void 0},children:g&&o})})});ka.displayName=ja;function Ea(r,e){return`${r}-trigger-${e}`}function Na(r,e){return`${r}-content-${e}`}var sm=ba,nm=wa,om=Sa,im=ka;function Ca({className:r,...e}){return i.jsx(sm,{"data-slot":"tabs",className:se("flex flex-col gap-2",r),...e})}function Ta({className:r,...e}){return i.jsx(nm,{"data-slot":"tabs-list",className:se("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...e})}function hr({className:r,...e}){return i.jsx(om,{"data-slot":"tabs-trigger",className:se("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...e})}function fr({className:r,...e}){return i.jsx(im,{"data-slot":"tabs-content",className:se("flex-1 outline-none",r),...e})}function am(){const{user:r}=At(),{refreshHistory:e}=ls(),[t,s]=m.useState({weeklyHours:0,monthlyHours:0,weeklyChange:0,weeklyChangePercent:0,monthlyChange:0,monthlyChangePercent:0,weeklyTarget:40,weeklyCompletion:0,monthlyTarget:160,monthlyCompletion:0,dailyStats:[],totalEntries:0}),[n,o]=m.useState(!0),[a,l]=m.useState(null);m.useEffect(()=>{console.log("Analytics component mounted"),r?c():(console.log("No user found, setting loading to false"),o(!1))},[r]),m.useEffect(()=>{e>0&&r&&c()},[e]);const c=async()=>{if(!r){console.log("No user available for analytics"),o(!1);return}try{console.log("Loading analytics for user:",r.id),o(!0),l(null);const f=await be(`/analytics?userId=${r.id}`);console.log("Analytics response:",f),f.success?s(f.analytics):l(f.error||"Error al cargar analytics")}catch(f){console.error("Error loading analytics:",f),l("Error de conexión al cargar analytics")}finally{o(!1)}},d=t.weeklyTarget||40,h=t.weeklyHours>0?t.weeklyHours/5:0,u=t.weeklyCompletion||0,g=Array.isArray(t.dailyStats)?t.dailyStats.filter(f=>f&&f.hours>=7).length:0,p=[{week:"S1",hours:Math.round((t.monthlyHours||0)*.25)},{week:"S2",hours:Math.round((t.monthlyHours||0)*.25)},{week:"S3",hours:Math.round((t.monthlyHours||0)*.25)},{week:"S4",hours:t.weeklyHours||0}],y=[{name:"Trabajo General",hours:Math.round((t.weeklyHours||0)*.7),color:"#0088FE"},{name:"Reuniones",hours:Math.round((t.weeklyHours||0)*.15),color:"#00C49F"},{name:"Capacitación",hours:Math.round((t.weeklyHours||0)*.1),color:"#FFBB28"},{name:"Otros",hours:Math.round((t.weeklyHours||0)*.05),color:"#FF8042"}].filter(f=>f.hours>0);return a?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Análisis de Tiempo"})}),i.jsx(K,{className:"text-center py-8",children:i.jsxs(Y,{children:[i.jsx("div",{className:"text-red-500 mb-4",children:"⚠️ Error al cargar analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a}),i.jsx("button",{onClick:c,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Reintentar"})]})})]}):n?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Análisis de Tiempo"})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(f=>i.jsxs(K,{className:"animate-pulse",children:[i.jsx(oe,{className:"pb-2",children:i.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),i.jsxs(Y,{children:[i.jsx("div",{className:"h-8 bg-muted rounded w-16 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-32"})]})]},f))})]}):(console.log("Rendering Analytics with data:",t),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Análisis de Tiempo"}),i.jsx(ht,{variant:"outline",className:"text-sm",children:"Semana actual"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Horas Semanales"}),i.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[t.weeklyHours,"h"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Meta: ",d,"h (",u,"%)"]})]})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Promedio Diario"}),i.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[h.toFixed(1),"h"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Objetivo: 8h diarias"})]})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Cambio Semanal"}),i.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[t.weeklyChange>=0?"+":"",t.weeklyChange,"h"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.weeklyChangePercent>=0?"+":"",t.weeklyChangePercent,"% vs semana anterior"]})]})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Días Completos"}),i.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[g,"/5"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Días con 8+ horas"})]})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(le,{className:"text-sm font-medium",children:"Cambio Mensual"}),i.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Y,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[t.monthlyChange>=0?"+":"",t.monthlyChange,"h"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.monthlyChangePercent>=0?"+":"",t.monthlyChangePercent,"% vs mes anterior"]})]})]})]}),i.jsxs(Ca,{defaultValue:"weekly",className:"space-y-4",children:[i.jsxs(Ta,{children:[i.jsx(hr,{value:"weekly",children:"Semanal"}),i.jsx(hr,{value:"monthly",children:"Mensual"}),i.jsx(hr,{value:"projects",children:"Proyectos"})]}),i.jsx(fr,{value:"weekly",className:"space-y-4",children:i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{children:"Horas Trabajadas - Esta Semana"})}),i.jsx(Y,{children:i.jsx(ws,{width:"100%",height:300,children:i.jsxs(dc,{data:t.dailyStats.map(f=>({...f,target:8})),children:[i.jsx(Zn,{strokeDasharray:"3 3"}),i.jsx(eo,{dataKey:"day"}),i.jsx(to,{}),i.jsx(_s,{formatter:(f,v)=>[`${f}h`,v==="hours"?"Trabajadas":"Objetivo"]}),i.jsx(ro,{dataKey:"target",fill:"#e2e8f0",name:"target"}),i.jsx(ro,{dataKey:"hours",fill:"#3b82f6",name:"hours"})]})})})]})}),i.jsx(fr,{value:"monthly",className:"space-y-4",children:i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{children:"Tendencia Mensual"})}),i.jsx(Y,{children:i.jsx(ws,{width:"100%",height:300,children:i.jsxs(uc,{data:p,children:[i.jsx(Zn,{strokeDasharray:"3 3"}),i.jsx(eo,{dataKey:"week"}),i.jsx(to,{}),i.jsx(_s,{formatter:f=>[`${f}h`,"Horas"]}),i.jsx(hc,{type:"monotone",dataKey:"hours",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:6}})]})})})]})}),i.jsx(fr,{value:"projects",className:"space-y-4",children:i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{children:"Distribución por Proyecto"})}),i.jsx(Y,{children:i.jsx(ws,{width:"100%",height:300,children:i.jsxs(fc,{children:[i.jsx(mc,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:f,percent:v})=>`${f} ${(v*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"hours",children:y.map((f,v)=>i.jsx(pc,{fill:f.color},`cell-${v}`))}),i.jsx(_s,{formatter:f=>[`${f}h`,"Horas"]})]})})})]})})})]})]}))}const $o=r=>{const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${s}`};function lm(){const{user:r}=At(),{refreshHistory:e}=ls(),[t,s]=m.useState(new Date),[n,o]=m.useState(new Date),[a,l]=m.useState([]),[c,d]=m.useState(null),[h,u]=m.useState(!0),[g,p]=m.useState({totalDays:0,workDays:0,completeDays:0,averageHours:0,totalHours:0});m.useEffect(()=>{r&&y()},[n,r]),m.useEffect(()=>{e>0&&r&&y()},[e]),m.useEffect(()=>{const E=a.find(P=>P.date===$o(t));d(E||null)},[t,a]);const y=async()=>{if(r)try{u(!0);const E=new Date(n.getFullYear(),n.getMonth(),1),P=new Date(n.getFullYear(),n.getMonth()+1,0),M=await be(`/time-entries/calendar?userId=${r.id}&start=${E.toISOString()}&end=${P.toISOString()}`);M.success&&(l(M.entries||[]),f(M.entries||[]))}catch(E){console.error("Error loading calendar data:",E)}finally{u(!1)}},f=E=>{const P=E.length,M=E.filter(R=>R.status==="completed").length,C=E.reduce((R,O)=>R+(O.totalHours||0),0),$=M>0?C/M:0;p({totalDays:new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),workDays:P,completeDays:M,averageHours:Math.round($*10)/10,totalHours:Math.round(C*10)/10})},v=E=>new Date(E).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),b=E=>E.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),w=E=>{const P=new Date(n);E==="prev"?P.setMonth(P.getMonth()-1):P.setMonth(P.getMonth()+1),o(P)},x=E=>{switch(E){case"completed":return"Completado";case"incomplete":return"Incompleto";case"absent":return"Ausente";default:return"Sin datos"}},_=n.toLocaleDateString("es-ES",{month:"long",year:"numeric"}),S=E=>new Date(E.getFullYear(),E.getMonth()+1,0).getDate(),k=E=>new Date(E.getFullYear(),E.getMonth(),1).getDay(),j=E=>new Date(E.getFullYear(),E.getMonth(),0).getDate(),A=E=>{const P=new Date;return E.getDate()===P.getDate()&&E.getMonth()===P.getMonth()&&E.getFullYear()===P.getFullYear()},B=E=>t.getDate()===E.getDate()&&t.getMonth()===E.getMonth()&&t.getFullYear()===E.getFullYear(),T=E=>{const P=$o(E),M=a.find(C=>C.date===P);return(M==null?void 0:M.status)||"absent"},W=E=>{switch(E){case"completed":return"bg-green-100 text-green-800 border-green-200";case"incomplete":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"absent":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-gray-50 text-gray-600 border-gray-200"}},I=()=>{const E=S(n),P=k(n),M=j(n),C=[];for(let O=P-1;O>=0;O--){const V=M-O;C.push(i.jsx("div",{className:"h-12 flex items-center justify-center text-gray-400 text-sm",children:V},`prev-${V}`))}for(let O=1;O<=E;O++){const V=new Date(n.getFullYear(),n.getMonth(),O),te=T(V),Re=A(V),U=B(V);C.push(i.jsx("button",{onClick:()=>s(V),className:`
            h-12 w-full flex items-center justify-center text-sm font-medium rounded-lg border-2 transition-all duration-200 hover:scale-105
            ${Re?"ring-2 ring-blue-500 ring-offset-2":""}
            ${U?"ring-2 ring-primary ring-offset-2":""}
            ${W(te)}
          `,children:O},O))}const R=42-C.length;for(let O=1;O<=R;O++)C.push(i.jsx("div",{className:"h-12 flex items-center justify-center text-gray-400 text-sm",children:O},`next-${O}`));return C};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ft,{className:"h-6 w-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Calendario"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ye,{variant:"outline",size:"sm",onClick:()=>w("prev"),children:i.jsx(Xs,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium min-w-[180px] text-center",children:_}),i.jsx(ye,{variant:"outline",size:"sm",onClick:()=>w("next"),children:i.jsx(Ys,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(K,{children:i.jsx(Y,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Días trabajados"}),i.jsx("p",{className:"text-2xl font-bold",children:g.workDays})]}),i.jsx(ft,{className:"h-8 w-8 text-muted-foreground"})]})})}),i.jsx(K,{children:i.jsx(Y,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Días completos"}),i.jsx("p",{className:"text-2xl font-bold",children:g.completeDays})]}),i.jsx(jn,{className:"h-8 w-8 text-muted-foreground"})]})})}),i.jsx(K,{children:i.jsx(Y,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total horas"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g.totalHours,"h"]})]}),i.jsx(Ae,{className:"h-8 w-8 text-muted-foreground"})]})})}),i.jsx(K,{children:i.jsx(Y,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Media diaria"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g.averageHours,"h"]})]}),i.jsx(Kr,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(K,{className:"lg:col-span-2",children:[i.jsx(oe,{children:i.jsx(le,{children:"Vista de Calendario"})}),i.jsx(Y,{children:h?i.jsx("div",{className:"animate-pulse space-y-4",children:i.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:42}).map((E,P)=>i.jsx("div",{className:"h-12 bg-muted rounded"},P))})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx(ye,{variant:"outline",size:"sm",onClick:()=>w("prev"),children:i.jsx(Xs,{className:"h-4 w-4"})}),i.jsx("h3",{className:"text-lg font-semibold",children:_}),i.jsx(ye,{variant:"outline",size:"sm",onClick:()=>w("next"),children:i.jsx(Ys,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(E=>i.jsx("div",{className:"h-8 flex items-center justify-center text-sm font-medium text-muted-foreground",children:E},E))}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:I()}),i.jsxs("div",{className:"flex flex-wrap gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-green-100 border border-green-200"}),i.jsx("span",{children:"Completado"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-yellow-100 border border-yellow-200"}),i.jsx("span",{children:"Incompleto"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-gray-50 border border-gray-200"}),i.jsx("span",{children:"Sin registro"})]})]})]})})]}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{children:"Detalle del Día"})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center pb-4 border-b",children:[i.jsx("h3",{className:"font-medium",children:b(t)}),i.jsx(ht,{variant:(c==null?void 0:c.status)==="completed"?"default":"secondary",className:"mt-2",children:c?x(c.status):"Sin registro"})]}),c?i.jsxs("div",{className:"space-y-4",children:[c.checkIn&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Entrada:"}),i.jsx("span",{className:"font-mono",children:v(c.checkIn)})]}),c.checkOut&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Salida:"}),i.jsx("span",{className:"font-mono",children:v(c.checkOut)})]}),c.totalHours&&i.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[i.jsx("span",{className:"text-sm font-medium",children:"Total trabajado:"}),i.jsxs("span",{className:"font-bold",children:[c.totalHours,"h"]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ae,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay registros para este día"})]})]})]})]})]})}function me({className:r,type:e,...t}){return i.jsx("input",{type:e,"data-slot":"input",className:se("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...t})}var cm="Label",Aa=m.forwardRef((r,e)=>i.jsx(G.label,{...r,ref:e,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||((n=r.onMouseDown)==null||n.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Aa.displayName=cm;var dm=Aa;function ne({className:r,...e}){return i.jsx(dm,{"data-slot":"label",className:se("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...e})}function um({className:r,...e}){return i.jsx("textarea",{"data-slot":"textarea",className:se("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...e})}var hm="Separator",Do="horizontal",fm=["horizontal","vertical"],Pa=m.forwardRef((r,e)=>{const{decorative:t,orientation:s=Do,...n}=r,o=mm(s)?s:Do,l=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(G.div,{"data-orientation":o,...l,...n,ref:e})});Pa.displayName=hm;function mm(r){return fm.includes(r)}var pm=Pa;function qt({className:r,orientation:e="horizontal",decorative:t=!0,...s}){return i.jsx(pm,{"data-slot":"separator-root",decorative:t,orientation:e,className:se("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),...s})}var $n="Progress",Dn=100,[gm,vy]=gt($n),[vm,ym]=gm($n),Ra=m.forwardRef((r,e)=>{const{__scopeProgress:t,value:s=null,max:n,getValueLabel:o=bm,...a}=r;(n||n===0)&&!Lo(n)&&console.error(xm(`${n}`,"Progress"));const l=Lo(n)?n:Dn;s!==null&&!Mo(s,l)&&console.error(wm(`${s}`,"Progress"));const c=Mo(s,l)?s:null,d=Yr(c)?o(c,l):void 0;return i.jsx(vm,{scope:t,value:c,max:l,children:i.jsx(G.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Yr(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":$a(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});Ra.displayName=$n;var Ia="ProgressIndicator",Oa=m.forwardRef((r,e)=>{const{__scopeProgress:t,...s}=r,n=ym(Ia,t);return i.jsx(G.div,{"data-state":$a(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:e})});Oa.displayName=Ia;function bm(r,e){return`${Math.round(r/e*100)}%`}function $a(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function Yr(r){return typeof r=="number"}function Lo(r){return Yr(r)&&!isNaN(r)&&r>0}function Mo(r,e){return Yr(r)&&!isNaN(r)&&r<=e&&r>=0}function xm(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Dn}\`.`}function wm(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Dn} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _m=Ra,Sm=Oa;function jm({className:r,value:e,...t}){return i.jsx(_m,{"data-slot":"progress",className:se("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...t,children:i.jsx(Sm,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}const Bo={id:"default",firstName:"",lastName:"",email:"",phone:"",position:"",department:"",location:"",bio:"",avatar:"",startDate:"",employeeId:""};function km(){const[r,e]=m.useState(Bo),[t,s]=m.useState({totalHours:0,daysWorked:0,averageDaily:0,punctualityScore:0,achievements:[]}),[n,o]=m.useState(!1),[a,l]=m.useState(!1),[c,d]=m.useState(null);m.useEffect(()=>{h(),u()},[]);const h=async()=>{try{o(!0);const f=await be("/profile");f.success&&f.profile&&e({...Bo,...f.profile})}catch(f){console.error("Error loading profile:",f)}finally{o(!1)}},u=async()=>{try{const f=await be("/profile/stats");f.success&&s(f.stats)}catch(f){console.error("Error loading profile stats:",f)}},g=async()=>{try{if(l(!0),c){const v=new FormData;v.append("avatar",c);const b=await be("/profile/avatar",{method:"POST",body:v});b.success&&e(w=>({...w,avatar:b.avatarUrl}))}(await be("/profile",{method:"POST",body:JSON.stringify({profile:r})})).success?Ge.success("Perfil actualizado correctamente"):Ge.error("Error al actualizar el perfil")}catch(f){console.error("Error saving profile:",f),Ge.error("Error al actualizar el perfil")}finally{l(!1)}},p=f=>{var b;const v=(b=f.target.files)==null?void 0:b[0];if(v){d(v);const w=URL.createObjectURL(v);e(x=>({...x,avatar:w}))}},y=(f,v)=>`${f.charAt(0)}${v.charAt(0)}`.toUpperCase();return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qr,{className:"h-6 w-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Mi Perfil"})]}),i.jsx("div",{className:"grid gap-6",children:[1,2,3].map(f=>i.jsxs(K,{className:"animate-pulse",children:[i.jsx(oe,{children:i.jsx("div",{className:"h-6 bg-muted rounded w-1/3"})}),i.jsx(Y,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-2/3"}),i.jsx("div",{className:"h-10 bg-muted rounded"})]})})]},f))})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qr,{className:"h-6 w-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Mi Perfil"})]}),i.jsxs(ye,{onClick:g,disabled:a,children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),a?"Guardando...":"Guardar"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{children:"Información Personal"})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(Oi,{className:"h-20 w-20",children:[i.jsx($i,{src:r.avatar}),i.jsx(Di,{children:y(r.firstName,r.lastName)})]}),i.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-1 cursor-pointer hover:bg-primary/90",children:[i.jsx(bc,{className:"h-3 w-3"}),i.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden"})]})]}),i.jsx("div",{className:"flex-1 space-y-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(ne,{children:"Nombre"}),i.jsx(me,{value:r.firstName,onChange:f=>e(v=>({...v,firstName:f.target.value})),placeholder:"Tu nombre"})]}),i.jsxs("div",{children:[i.jsx(ne,{children:"Apellidos"}),i.jsx(me,{value:r.lastName,onChange:f=>e(v=>({...v,lastName:f.target.value})),placeholder:"Tus apellidos"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Qs,{className:"h-4 w-4"}),"Email"]}),i.jsx(me,{type:"email",value:r.email,onChange:f=>e(v=>({...v,email:f.target.value})),placeholder:"tu@email.com"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(xc,{className:"h-4 w-4"}),"Teléfono"]}),i.jsx(me,{type:"tel",value:r.phone,onChange:f=>e(v=>({...v,phone:f.target.value})),placeholder:"+34 123 456 789"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Biografía"}),i.jsx(um,{value:r.bio,onChange:f=>e(v=>({...v,bio:f.target.value})),placeholder:"Cuéntanos algo sobre ti...",rows:3})]})]})]}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsx(le,{children:"Información Laboral"})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(wc,{className:"h-4 w-4"}),"Cargo"]}),i.jsx(me,{value:r.position,onChange:f=>e(v=>({...v,position:f.target.value})),placeholder:"Tu cargo"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Departamento"}),i.jsx(me,{value:r.department,onChange:f=>e(v=>({...v,department:f.target.value})),placeholder:"Tu departamento"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(_c,{className:"h-4 w-4"}),"Ubicación"]}),i.jsx(me,{value:r.location,onChange:f=>e(v=>({...v,location:f.target.value})),placeholder:"Tu ubicación"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(ft,{className:"h-4 w-4"}),"Fecha de inicio"]}),i.jsx(me,{type:"date",value:r.startDate,onChange:f=>e(v=>({...v,startDate:f.target.value}))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"ID de empleado"}),i.jsx(me,{value:r.employeeId,onChange:f=>e(v=>({...v,employeeId:f.target.value})),placeholder:"EMP001"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(K,{children:[i.jsx(oe,{children:i.jsxs(le,{className:"flex items-center gap-2",children:[i.jsx(jn,{className:"h-5 w-5"}),"Estadísticas"]})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[t.totalHours,"h"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total trabajadas"})]}),i.jsx(qt,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Días trabajados"}),i.jsx("span",{className:"font-medium",children:t.daysWorked})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Media diaria"}),i.jsxs("span",{className:"font-medium",children:[t.averageDaily,"h"]})]})]}),i.jsx(qt,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm",children:"Puntualidad"}),i.jsxs("span",{className:"text-sm font-medium",children:[t.punctualityScore,"%"]})]}),i.jsx(jm,{value:t.punctualityScore,className:"h-2"})]})]})]}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsxs(le,{className:"flex items-center gap-2",children:[i.jsx(so,{className:"h-5 w-5"}),"Logros"]})}),i.jsx(Y,{children:t.achievements.length===0?i.jsxs("div",{className:"text-center py-6",children:[i.jsx(so,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sigue trabajando para conseguir tus primeros logros"})]}):i.jsx("div",{className:"space-y-3",children:t.achievements.map(f=>i.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-muted/30",children:[i.jsx("div",{className:"text-2xl",children:f.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-sm",children:f.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:f.description})]})]},f.id))})})]})]})]})]})}function Da(r){const e=m.useRef({value:r,previous:r});return m.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}function La(r){const[e,t]=m.useState(void 0);return pe(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=r.offsetWidth,l=r.offsetHeight;t({width:a,height:l})});return s.observe(r,{box:"border-box"}),()=>s.unobserve(r)}else t(void 0)},[r]),e}var ds="Switch",[Em,yy]=gt(ds),[Nm,Cm]=Em(ds),Ma=m.forwardRef((r,e)=>{const{__scopeSwitch:t,name:s,checked:n,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...u}=r,[g,p]=m.useState(null),y=de(e,x=>p(x)),f=m.useRef(!1),v=g?h||!!g.closest("form"):!0,[b,w]=gr({prop:n,defaultProp:o??!1,onChange:d,caller:ds});return i.jsxs(Nm,{scope:t,checked:b,disabled:l,children:[i.jsx(G.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":Ha(b),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:y,onClick:ee(r.onClick,x=>{w(_=>!_),v&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})}),v&&i.jsx(Ua,{control:g,bubbles:!f.current,name:s,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});Ma.displayName=ds;var Ba="SwitchThumb",Fa=m.forwardRef((r,e)=>{const{__scopeSwitch:t,...s}=r,n=Cm(Ba,t);return i.jsx(G.span,{"data-state":Ha(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:e})});Fa.displayName=Ba;var Tm="SwitchBubbleInput",Ua=m.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:s=!0,...n},o)=>{const a=m.useRef(null),l=de(a,o),c=Da(t),d=La(e);return m.useEffect(()=>{const h=a.current;if(!h)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(c!==t&&p){const y=new Event("click",{bubbles:s});p.call(h,t),h.dispatchEvent(y)}},[c,t,s]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ua.displayName=Tm;function Ha(r){return r?"checked":"unchecked"}var Am=Ma,Pm=Fa;function Dr({className:r,...e}){return i.jsx(Am,{"data-slot":"switch",className:se("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:i.jsx(Pm,{"data-slot":"switch-thumb",className:se("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Fo(r,[e,t]){return Math.min(t,Math.max(e,r))}function Rm(r,e=globalThis==null?void 0:globalThis.document){const t=tt(r);m.useEffect(()=>{const s=n=>{n.key==="Escape"&&t(n)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var Im="DismissableLayer",mn="dismissableLayer.update",Om="dismissableLayer.pointerDownOutside",$m="dismissableLayer.focusOutside",Uo,za=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wa=m.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=r,d=m.useContext(za),[h,u]=m.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),y=de(e,j=>u(j)),f=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=f.indexOf(v),w=h?f.indexOf(h):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,S=Mm(j=>{const A=j.target,B=[...d.branches].some(T=>T.contains(A));!_||B||(n==null||n(j),a==null||a(j),j.defaultPrevented||l==null||l())},g),k=Bm(j=>{const A=j.target;[...d.branches].some(T=>T.contains(A))||(o==null||o(j),a==null||a(j),j.defaultPrevented||l==null||l())},g);return Rm(j=>{w===d.layers.size-1&&(s==null||s(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},g),m.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Uo=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Ho(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Uo)}},[h,g,t,d]),m.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Ho())},[h,d]),m.useEffect(()=>{const j=()=>p({});return document.addEventListener(mn,j),()=>document.removeEventListener(mn,j)},[]),i.jsx(G.div,{...c,ref:y,style:{pointerEvents:x?_?"auto":"none":void 0,...r.style},onFocusCapture:ee(r.onFocusCapture,k.onFocusCapture),onBlurCapture:ee(r.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ee(r.onPointerDownCapture,S.onPointerDownCapture)})});Wa.displayName=Im;var Dm="DismissableLayerBranch",Lm=m.forwardRef((r,e)=>{const t=m.useContext(za),s=m.useRef(null),n=de(e,s);return m.useEffect(()=>{const o=s.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),i.jsx(G.div,{...r,ref:n})});Lm.displayName=Dm;function Mm(r,e=globalThis==null?void 0:globalThis.document){const t=tt(r),s=m.useRef(!1),n=m.useRef(()=>{});return m.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){Va(Om,t,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=c,e.addEventListener("click",n.current,{once:!0})):c()}else e.removeEventListener("click",n.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",n.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function Bm(r,e=globalThis==null?void 0:globalThis.document){const t=tt(r),s=m.useRef(!1);return m.useEffect(()=>{const n=o=>{o.target&&!s.current&&Va($m,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ho(){const r=new CustomEvent(mn);document.dispatchEvent(r)}function Va(r,e,t,{discrete:s}){const n=t.originalEvent.target,o=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?_d(n,o):n.dispatchEvent(o)}var Ls=0;function Fm(){m.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??zo()),document.body.insertAdjacentElement("beforeend",r[1]??zo()),Ls++,()=>{Ls===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ls--}},[])}function zo(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Ms="focusScope.autoFocusOnMount",Bs="focusScope.autoFocusOnUnmount",Wo={bubbles:!1,cancelable:!0},Um="FocusScope",qa=m.forwardRef((r,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:o,...a}=r,[l,c]=m.useState(null),d=tt(n),h=tt(o),u=m.useRef(null),g=de(e,f=>c(f)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(s){let f=function(x){if(p.paused||!l)return;const _=x.target;l.contains(_)?u.current=_:dt(u.current,{select:!0})},v=function(x){if(p.paused||!l)return;const _=x.relatedTarget;_!==null&&(l.contains(_)||dt(u.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&dt(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",v);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",v),w.disconnect()}}},[s,l,p.paused]),m.useEffect(()=>{if(l){qo.add(p);const f=document.activeElement;if(!l.contains(f)){const b=new CustomEvent(Ms,Wo);l.addEventListener(Ms,d),l.dispatchEvent(b),b.defaultPrevented||(Hm(Km(Ka(l)),{select:!0}),document.activeElement===f&&dt(l))}return()=>{l.removeEventListener(Ms,d),setTimeout(()=>{const b=new CustomEvent(Bs,Wo);l.addEventListener(Bs,h),l.dispatchEvent(b),b.defaultPrevented||dt(f??document.body,{select:!0}),l.removeEventListener(Bs,h),qo.remove(p)},0)}}},[l,d,h,p]);const y=m.useCallback(f=>{if(!t&&!s||p.paused)return;const v=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,b=document.activeElement;if(v&&b){const w=f.currentTarget,[x,_]=zm(w);x&&_?!f.shiftKey&&b===_?(f.preventDefault(),t&&dt(x,{select:!0})):f.shiftKey&&b===x&&(f.preventDefault(),t&&dt(_,{select:!0})):b===w&&f.preventDefault()}},[t,s,p.paused]);return i.jsx(G.div,{tabIndex:-1,...a,ref:g,onKeyDown:y})});qa.displayName=Um;function Hm(r,{select:e=!1}={}){const t=document.activeElement;for(const s of r)if(dt(s,{select:e}),document.activeElement!==t)return}function zm(r){const e=Ka(r),t=Vo(e,r),s=Vo(e.reverse(),r);return[t,s]}function Ka(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Vo(r,e){for(const t of r)if(!Wm(t,{upTo:e}))return t}function Wm(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function Vm(r){return r instanceof HTMLInputElement&&"select"in r}function dt(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&Vm(r)&&e&&r.select()}}var qo=qm();function qm(){let r=[];return{add(e){const t=r[0];e!==t&&(t==null||t.pause()),r=Ko(r,e),r.unshift(e)},remove(e){var t;r=Ko(r,e),(t=r[0])==null||t.resume()}}}function Ko(r,e){const t=[...r],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function Km(r){return r.filter(e=>e.tagName!=="A")}const Gm=["top","right","bottom","left"],mt=Math.min,Te=Math.max,Xr=Math.round,Lr=Math.floor,Je=r=>({x:r,y:r}),Jm={left:"right",right:"left",bottom:"top",top:"bottom"},Ym={start:"end",end:"start"};function pn(r,e,t){return Te(r,mt(e,t))}function rt(r,e){return typeof r=="function"?r(e):r}function st(r){return r.split("-")[0]}function tr(r){return r.split("-")[1]}function Ln(r){return r==="x"?"y":"x"}function Mn(r){return r==="y"?"height":"width"}const Xm=new Set(["top","bottom"]);function Ke(r){return Xm.has(st(r))?"y":"x"}function Bn(r){return Ln(Ke(r))}function Qm(r,e,t){t===void 0&&(t=!1);const s=tr(r),n=Bn(r),o=Mn(n);let a=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Qr(a)),[a,Qr(a)]}function Zm(r){const e=Qr(r);return[gn(r),e,gn(e)]}function gn(r){return r.replace(/start|end/g,e=>Ym[e])}const Go=["left","right"],Jo=["right","left"],ep=["top","bottom"],tp=["bottom","top"];function rp(r,e,t){switch(r){case"top":case"bottom":return t?e?Jo:Go:e?Go:Jo;case"left":case"right":return e?ep:tp;default:return[]}}function sp(r,e,t,s){const n=tr(r);let o=rp(st(r),t==="start",s);return n&&(o=o.map(a=>a+"-"+n),e&&(o=o.concat(o.map(gn)))),o}function Qr(r){return r.replace(/left|right|bottom|top/g,e=>Jm[e])}function np(r){return{top:0,right:0,bottom:0,left:0,...r}}function Ga(r){return typeof r!="number"?np(r):{top:r,right:r,bottom:r,left:r}}function Zr(r){const{x:e,y:t,width:s,height:n}=r;return{width:s,height:n,top:t,left:e,right:e+s,bottom:t+n,x:e,y:t}}function Yo(r,e,t){let{reference:s,floating:n}=r;const o=Ke(e),a=Bn(e),l=Mn(a),c=st(e),d=o==="y",h=s.x+s.width/2-n.width/2,u=s.y+s.height/2-n.height/2,g=s[l]/2-n[l]/2;let p;switch(c){case"top":p={x:h,y:s.y-n.height};break;case"bottom":p={x:h,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:u};break;case"left":p={x:s.x-n.width,y:u};break;default:p={x:s.x,y:s.y}}switch(tr(e)){case"start":p[a]-=g*(t&&d?-1:1);break;case"end":p[a]+=g*(t&&d?-1:1);break}return p}const op=async(r,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:a}=t,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:r,floating:e,strategy:n}),{x:h,y:u}=Yo(d,s,c),g=s,p={},y=0;for(let f=0;f<l.length;f++){const{name:v,fn:b}=l[f],{x:w,y:x,data:_,reset:S}=await b({x:h,y:u,initialPlacement:s,placement:g,strategy:n,middlewareData:p,rects:d,platform:a,elements:{reference:r,floating:e}});h=w??h,u=x??u,p={...p,[v]:{...p[v],..._}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(g=S.placement),S.rects&&(d=S.rects===!0?await a.getElementRects({reference:r,floating:e,strategy:n}):S.rects),{x:h,y:u}=Yo(d,g,c)),f=-1)}return{x:h,y:u,placement:g,strategy:n,middlewareData:p}};async function vr(r,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:o,rects:a,elements:l,strategy:c}=r,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:g=!1,padding:p=0}=rt(e,r),y=Ga(p),v=l[g?u==="floating"?"reference":"floating":u],b=Zr(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(v)))==null||t?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),w=u==="floating"?{x:s,y:n,width:a.floating.width,height:a.floating.height}:a.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},S=Zr(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:x,strategy:c}):w);return{top:(b.top-S.top+y.top)/_.y,bottom:(S.bottom-b.bottom+y.bottom)/_.y,left:(b.left-S.left+y.left)/_.x,right:(S.right-b.right+y.right)/_.x}}const ip=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:s,placement:n,rects:o,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=rt(r,e)||{};if(d==null)return{};const u=Ga(h),g={x:t,y:s},p=Bn(n),y=Mn(p),f=await a.getDimensions(d),v=p==="y",b=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",_=o.reference[y]+o.reference[p]-g[p]-o.floating[y],S=g[p]-o.reference[p],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let j=k?k[x]:0;(!j||!await(a.isElement==null?void 0:a.isElement(k)))&&(j=l.floating[x]||o.floating[y]);const A=_/2-S/2,B=j/2-f[y]/2-1,T=mt(u[b],B),W=mt(u[w],B),I=T,E=j-f[y]-W,P=j/2-f[y]/2+A,M=pn(I,P,E),C=!c.arrow&&tr(n)!=null&&P!==M&&o.reference[y]/2-(P<I?T:W)-f[y]/2<0,$=C?P<I?P-I:P-E:0;return{[p]:g[p]+$,data:{[p]:M,centerOffset:P-M-$,...C&&{alignmentOffset:$}},reset:C}}}),ap=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,s;const{placement:n,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:g,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:f=!0,...v}=rt(r,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const b=st(n),w=Ke(l),x=st(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=g||(x||!f?[Qr(l)]:Zm(l)),k=y!=="none";!g&&k&&S.push(...sp(l,f,y,_));const j=[l,...S],A=await vr(e,v),B=[];let T=((s=o.flip)==null?void 0:s.overflows)||[];if(h&&B.push(A[b]),u){const P=Qm(n,a,_);B.push(A[P[0]],A[P[1]])}if(T=[...T,{placement:n,overflows:B}],!B.every(P=>P<=0)){var W,I;const P=(((W=o.flip)==null?void 0:W.index)||0)+1,M=j[P];if(M&&(!(u==="alignment"?w!==Ke(M):!1)||T.every(R=>Ke(R.placement)===w?R.overflows[0]>0:!0)))return{data:{index:P,overflows:T},reset:{placement:M}};let C=(I=T.filter($=>$.overflows[0]<=0).sort(($,R)=>$.overflows[1]-R.overflows[1])[0])==null?void 0:I.placement;if(!C)switch(p){case"bestFit":{var E;const $=(E=T.filter(R=>{if(k){const O=Ke(R.placement);return O===w||O==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(O=>O>0).reduce((O,V)=>O+V,0)]).sort((R,O)=>R[1]-O[1])[0])==null?void 0:E[0];$&&(C=$);break}case"initialPlacement":C=l;break}if(n!==C)return{reset:{placement:C}}}return{}}}};function Xo(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function Qo(r){return Gm.some(e=>r[e]>=0)}const lp=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...n}=rt(r,e);switch(s){case"referenceHidden":{const o=await vr(e,{...n,elementContext:"reference"}),a=Xo(o,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Qo(a)}}}case"escaped":{const o=await vr(e,{...n,altBoundary:!0}),a=Xo(o,t.floating);return{data:{escapedOffsets:a,escaped:Qo(a)}}}default:return{}}}}},Ja=new Set(["left","top"]);async function cp(r,e){const{placement:t,platform:s,elements:n}=r,o=await(s.isRTL==null?void 0:s.isRTL(n.floating)),a=st(t),l=tr(t),c=Ke(t)==="y",d=Ja.has(a)?-1:1,h=o&&c?-1:1,u=rt(e,r);let{mainAxis:g,crossAxis:p,alignmentAxis:y}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*h,y:g*d}:{x:g*d,y:p*h}}const dp=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,s;const{x:n,y:o,placement:a,middlewareData:l}=e,c=await cp(e,r);return a===((t=l.offset)==null?void 0:t.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:o+c.y,data:{...c,placement:a}}}}},up=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...c}=rt(r,e),d={x:t,y:s},h=await vr(e,c),u=Ke(st(n)),g=Ln(u);let p=d[g],y=d[u];if(o){const v=g==="y"?"top":"left",b=g==="y"?"bottom":"right",w=p+h[v],x=p-h[b];p=pn(w,p,x)}if(a){const v=u==="y"?"top":"left",b=u==="y"?"bottom":"right",w=y+h[v],x=y-h[b];y=pn(w,y,x)}const f=l.fn({...e,[g]:p,[u]:y});return{...f,data:{x:f.x-t,y:f.y-s,enabled:{[g]:o,[u]:a}}}}}},hp=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:s,placement:n,rects:o,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=rt(r,e),h={x:t,y:s},u=Ke(n),g=Ln(u);let p=h[g],y=h[u];const f=rt(l,e),v=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const x=g==="y"?"height":"width",_=o.reference[g]-o.floating[x]+v.mainAxis,S=o.reference[g]+o.reference[x]-v.mainAxis;p<_?p=_:p>S&&(p=S)}if(d){var b,w;const x=g==="y"?"width":"height",_=Ja.has(st(n)),S=o.reference[u]-o.floating[x]+(_&&((b=a.offset)==null?void 0:b[u])||0)+(_?0:v.crossAxis),k=o.reference[u]+o.reference[x]+(_?0:((w=a.offset)==null?void 0:w[u])||0)-(_?v.crossAxis:0);y<S?y=S:y>k&&(y=k)}return{[g]:p,[u]:y}}}},fp=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,s;const{placement:n,rects:o,platform:a,elements:l}=e,{apply:c=()=>{},...d}=rt(r,e),h=await vr(e,d),u=st(n),g=tr(n),p=Ke(n)==="y",{width:y,height:f}=o.floating;let v,b;u==="top"||u==="bottom"?(v=u,b=g===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=u,v=g==="end"?"top":"bottom");const w=f-h.top-h.bottom,x=y-h.left-h.right,_=mt(f-h[v],w),S=mt(y-h[b],x),k=!e.middlewareData.shift;let j=_,A=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=x),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(j=w),k&&!g){const T=Te(h.left,0),W=Te(h.right,0),I=Te(h.top,0),E=Te(h.bottom,0);p?A=y-2*(T!==0||W!==0?T+W:Te(h.left,h.right)):j=f-2*(I!==0||E!==0?I+E:Te(h.top,h.bottom))}await c({...e,availableWidth:A,availableHeight:j});const B=await a.getDimensions(l.floating);return y!==B.width||f!==B.height?{reset:{rects:!0}}:{}}}};function us(){return typeof window<"u"}function rr(r){return Ya(r)?(r.nodeName||"").toLowerCase():"#document"}function Pe(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Xe(r){var e;return(e=(Ya(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Ya(r){return us()?r instanceof Node||r instanceof Pe(r).Node:!1}function Ue(r){return us()?r instanceof Element||r instanceof Pe(r).Element:!1}function Ye(r){return us()?r instanceof HTMLElement||r instanceof Pe(r).HTMLElement:!1}function Zo(r){return!us()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Pe(r).ShadowRoot}const mp=new Set(["inline","contents"]);function kr(r){const{overflow:e,overflowX:t,overflowY:s,display:n}=He(r);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!mp.has(n)}const pp=new Set(["table","td","th"]);function gp(r){return pp.has(rr(r))}const vp=[":popover-open",":modal"];function hs(r){return vp.some(e=>{try{return r.matches(e)}catch{return!1}})}const yp=["transform","translate","scale","rotate","perspective"],bp=["transform","translate","scale","rotate","perspective","filter"],xp=["paint","layout","strict","content"];function Fn(r){const e=Un(),t=Ue(r)?He(r):r;return yp.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||bp.some(s=>(t.willChange||"").includes(s))||xp.some(s=>(t.contain||"").includes(s))}function wp(r){let e=pt(r);for(;Ye(e)&&!Xt(e);){if(Fn(e))return e;if(hs(e))return null;e=pt(e)}return null}function Un(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _p=new Set(["html","body","#document"]);function Xt(r){return _p.has(rr(r))}function He(r){return Pe(r).getComputedStyle(r)}function fs(r){return Ue(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function pt(r){if(rr(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Zo(r)&&r.host||Xe(r);return Zo(e)?e.host:e}function Xa(r){const e=pt(r);return Xt(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ye(e)&&kr(e)?e:Xa(e)}function yr(r,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const n=Xa(r),o=n===((s=r.ownerDocument)==null?void 0:s.body),a=Pe(n);if(o){const l=vn(a);return e.concat(a,a.visualViewport||[],kr(n)?n:[],l&&t?yr(l):[])}return e.concat(n,yr(n,[],t))}function vn(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Qa(r){const e=He(r);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=Ye(r),o=n?r.offsetWidth:t,a=n?r.offsetHeight:s,l=Xr(t)!==o||Xr(s)!==a;return l&&(t=o,s=a),{width:t,height:s,$:l}}function Hn(r){return Ue(r)?r:r.contextElement}function Kt(r){const e=Hn(r);if(!Ye(e))return Je(1);const t=e.getBoundingClientRect(),{width:s,height:n,$:o}=Qa(e);let a=(o?Xr(t.width):t.width)/s,l=(o?Xr(t.height):t.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Sp=Je(0);function Za(r){const e=Pe(r);return!Un()||!e.visualViewport?Sp:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jp(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Pe(r)?!1:e}function Et(r,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=r.getBoundingClientRect(),o=Hn(r);let a=Je(1);e&&(s?Ue(s)&&(a=Kt(s)):a=Kt(r));const l=jp(o,t,s)?Za(o):Je(0);let c=(n.left+l.x)/a.x,d=(n.top+l.y)/a.y,h=n.width/a.x,u=n.height/a.y;if(o){const g=Pe(o),p=s&&Ue(s)?Pe(s):s;let y=g,f=vn(y);for(;f&&s&&p!==y;){const v=Kt(f),b=f.getBoundingClientRect(),w=He(f),x=b.left+(f.clientLeft+parseFloat(w.paddingLeft))*v.x,_=b.top+(f.clientTop+parseFloat(w.paddingTop))*v.y;c*=v.x,d*=v.y,h*=v.x,u*=v.y,c+=x,d+=_,y=Pe(f),f=vn(y)}}return Zr({width:h,height:u,x:c,y:d})}function ms(r,e){const t=fs(r).scrollLeft;return e?e.left+t:Et(Xe(r)).left+t}function el(r,e){const t=r.getBoundingClientRect(),s=t.left+e.scrollLeft-ms(r,t),n=t.top+e.scrollTop;return{x:s,y:n}}function kp(r){let{elements:e,rect:t,offsetParent:s,strategy:n}=r;const o=n==="fixed",a=Xe(s),l=e?hs(e.floating):!1;if(s===a||l&&o)return t;let c={scrollLeft:0,scrollTop:0},d=Je(1);const h=Je(0),u=Ye(s);if((u||!u&&!o)&&((rr(s)!=="body"||kr(a))&&(c=fs(s)),Ye(s))){const p=Et(s);d=Kt(s),h.x=p.x+s.clientLeft,h.y=p.y+s.clientTop}const g=a&&!u&&!o?el(a,c):Je(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+g.x,y:t.y*d.y-c.scrollTop*d.y+h.y+g.y}}function Ep(r){return Array.from(r.getClientRects())}function Np(r){const e=Xe(r),t=fs(r),s=r.ownerDocument.body,n=Te(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=Te(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-t.scrollLeft+ms(r);const l=-t.scrollTop;return He(s).direction==="rtl"&&(a+=Te(e.clientWidth,s.clientWidth)-n),{width:n,height:o,x:a,y:l}}const ei=25;function Cp(r,e){const t=Pe(r),s=Xe(r),n=t.visualViewport;let o=s.clientWidth,a=s.clientHeight,l=0,c=0;if(n){o=n.width,a=n.height;const h=Un();(!h||h&&e==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}const d=ms(s);if(d<=0){const h=s.ownerDocument,u=h.body,g=getComputedStyle(u),p=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(s.clientWidth-u.clientWidth-p);y<=ei&&(o-=y)}else d<=ei&&(o+=d);return{width:o,height:a,x:l,y:c}}const Tp=new Set(["absolute","fixed"]);function Ap(r,e){const t=Et(r,!0,e==="fixed"),s=t.top+r.clientTop,n=t.left+r.clientLeft,o=Ye(r)?Kt(r):Je(1),a=r.clientWidth*o.x,l=r.clientHeight*o.y,c=n*o.x,d=s*o.y;return{width:a,height:l,x:c,y:d}}function ti(r,e,t){let s;if(e==="viewport")s=Cp(r,t);else if(e==="document")s=Np(Xe(r));else if(Ue(e))s=Ap(e,t);else{const n=Za(r);s={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Zr(s)}function tl(r,e){const t=pt(r);return t===e||!Ue(t)||Xt(t)?!1:He(t).position==="fixed"||tl(t,e)}function Pp(r,e){const t=e.get(r);if(t)return t;let s=yr(r,[],!1).filter(l=>Ue(l)&&rr(l)!=="body"),n=null;const o=He(r).position==="fixed";let a=o?pt(r):r;for(;Ue(a)&&!Xt(a);){const l=He(a),c=Fn(a);!c&&l.position==="fixed"&&(n=null),(o?!c&&!n:!c&&l.position==="static"&&!!n&&Tp.has(n.position)||kr(a)&&!c&&tl(r,a))?s=s.filter(h=>h!==a):n=l,a=pt(a)}return e.set(r,s),s}function Rp(r){let{element:e,boundary:t,rootBoundary:s,strategy:n}=r;const a=[...t==="clippingAncestors"?hs(e)?[]:Pp(e,this._c):[].concat(t),s],l=a[0],c=a.reduce((d,h)=>{const u=ti(e,h,n);return d.top=Te(u.top,d.top),d.right=mt(u.right,d.right),d.bottom=mt(u.bottom,d.bottom),d.left=Te(u.left,d.left),d},ti(e,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ip(r){const{width:e,height:t}=Qa(r);return{width:e,height:t}}function Op(r,e,t){const s=Ye(e),n=Xe(e),o=t==="fixed",a=Et(r,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=Je(0);function d(){c.x=ms(n)}if(s||!s&&!o)if((rr(e)!=="body"||kr(n))&&(l=fs(e)),s){const p=Et(e,!0,o,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else n&&d();o&&!s&&n&&d();const h=n&&!s&&!o?el(n,l):Je(0),u=a.left+l.scrollLeft-c.x-h.x,g=a.top+l.scrollTop-c.y-h.y;return{x:u,y:g,width:a.width,height:a.height}}function Fs(r){return He(r).position==="static"}function ri(r,e){if(!Ye(r)||He(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Xe(r)===t&&(t=t.ownerDocument.body),t}function rl(r,e){const t=Pe(r);if(hs(r))return t;if(!Ye(r)){let n=pt(r);for(;n&&!Xt(n);){if(Ue(n)&&!Fs(n))return n;n=pt(n)}return t}let s=ri(r,e);for(;s&&gp(s)&&Fs(s);)s=ri(s,e);return s&&Xt(s)&&Fs(s)&&!Fn(s)?t:s||wp(r)||t}const $p=async function(r){const e=this.getOffsetParent||rl,t=this.getDimensions,s=await t(r.floating);return{reference:Op(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Dp(r){return He(r).direction==="rtl"}const Lp={convertOffsetParentRelativeRectToViewportRelativeRect:kp,getDocumentElement:Xe,getClippingRect:Rp,getOffsetParent:rl,getElementRects:$p,getClientRects:Ep,getDimensions:Ip,getScale:Kt,isElement:Ue,isRTL:Dp};function sl(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function Mp(r,e){let t=null,s;const n=Xe(r);function o(){var l;clearTimeout(s),(l=t)==null||l.disconnect(),t=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=r.getBoundingClientRect(),{left:h,top:u,width:g,height:p}=d;if(l||e(),!g||!p)return;const y=Lr(u),f=Lr(n.clientWidth-(h+g)),v=Lr(n.clientHeight-(u+p)),b=Lr(h),x={rootMargin:-y+"px "+-f+"px "+-v+"px "+-b+"px",threshold:Te(0,mt(1,c))||1};let _=!0;function S(k){const j=k[0].intersectionRatio;if(j!==c){if(!_)return a();j?a(!1,j):s=setTimeout(()=>{a(!1,1e-7)},1e3)}j===1&&!sl(d,r.getBoundingClientRect())&&a(),_=!1}try{t=new IntersectionObserver(S,{...x,root:n.ownerDocument})}catch{t=new IntersectionObserver(S,x)}t.observe(r)}return a(!0),o}function Bp(r,e,t,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=Hn(r),h=n||o?[...d?yr(d):[],...yr(e)]:[];h.forEach(b=>{n&&b.addEventListener("scroll",t,{passive:!0}),o&&b.addEventListener("resize",t)});const u=d&&l?Mp(d,t):null;let g=-1,p=null;a&&(p=new ResizeObserver(b=>{let[w]=b;w&&w.target===d&&p&&(p.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),t()}),d&&!c&&p.observe(d),p.observe(e));let y,f=c?Et(r):null;c&&v();function v(){const b=Et(r);f&&!sl(f,b)&&t(),f=b,y=requestAnimationFrame(v)}return t(),()=>{var b;h.forEach(w=>{n&&w.removeEventListener("scroll",t),o&&w.removeEventListener("resize",t)}),u==null||u(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const Fp=dp,Up=up,Hp=ap,zp=fp,Wp=lp,si=ip,Vp=hp,qp=(r,e,t)=>{const s=new Map,n={platform:Lp,...t},o={...n.platform,_c:s};return op(r,e,{...n,platform:o})};var Kp=typeof document<"u",Gp=function(){},zr=Kp?m.useLayoutEffect:Gp;function es(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,s,n;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!es(r[s],e[s]))return!1;return!0}if(n=Object.keys(r),t=n.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,n[s]))return!1;for(s=t;s--!==0;){const o=n[s];if(!(o==="_owner"&&r.$$typeof)&&!es(r[o],e[o]))return!1}return!0}return r!==r&&e!==e}function nl(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function ni(r,e){const t=nl(r);return Math.round(e*t)/t}function Us(r){const e=m.useRef(r);return zr(()=>{e.current=r}),e}function Jp(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=r,[h,u]=m.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,p]=m.useState(s);es(g,s)||p(s);const[y,f]=m.useState(null),[v,b]=m.useState(null),w=m.useCallback(R=>{R!==k.current&&(k.current=R,f(R))},[]),x=m.useCallback(R=>{R!==j.current&&(j.current=R,b(R))},[]),_=o||y,S=a||v,k=m.useRef(null),j=m.useRef(null),A=m.useRef(h),B=c!=null,T=Us(c),W=Us(n),I=Us(d),E=m.useCallback(()=>{if(!k.current||!j.current)return;const R={placement:e,strategy:t,middleware:g};W.current&&(R.platform=W.current),qp(k.current,j.current,R).then(O=>{const V={...O,isPositioned:I.current!==!1};P.current&&!es(A.current,V)&&(A.current=V,br.flushSync(()=>{u(V)}))})},[g,e,t,W,I]);zr(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,u(R=>({...R,isPositioned:!1})))},[d]);const P=m.useRef(!1);zr(()=>(P.current=!0,()=>{P.current=!1}),[]),zr(()=>{if(_&&(k.current=_),S&&(j.current=S),_&&S){if(T.current)return T.current(_,S,E);E()}},[_,S,E,T,B]);const M=m.useMemo(()=>({reference:k,floating:j,setReference:w,setFloating:x}),[w,x]),C=m.useMemo(()=>({reference:_,floating:S}),[_,S]),$=m.useMemo(()=>{const R={position:t,left:0,top:0};if(!C.floating)return R;const O=ni(C.floating,h.x),V=ni(C.floating,h.y);return l?{...R,transform:"translate("+O+"px, "+V+"px)",...nl(C.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:O,top:V}},[t,l,C.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:E,refs:M,elements:C,floatingStyles:$}),[h,E,M,C,$])}const Yp=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:s,padding:n}=typeof r=="function"?r(t):r;return s&&e(s)?s.current!=null?si({element:s.current,padding:n}).fn(t):{}:s?si({element:s,padding:n}).fn(t):{}}}},Xp=(r,e)=>({...Fp(r),options:[r,e]}),Qp=(r,e)=>({...Up(r),options:[r,e]}),Zp=(r,e)=>({...Vp(r),options:[r,e]}),eg=(r,e)=>({...Hp(r),options:[r,e]}),tg=(r,e)=>({...zp(r),options:[r,e]}),rg=(r,e)=>({...Wp(r),options:[r,e]}),sg=(r,e)=>({...Yp(r),options:[r,e]});var ng="Arrow",ol=m.forwardRef((r,e)=>{const{children:t,width:s=10,height:n=5,...o}=r;return i.jsx(G.svg,{...o,ref:e,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});ol.displayName=ng;var og=ol,zn="Popper",[il,al]=gt(zn),[ig,ll]=il(zn),cl=r=>{const{__scopePopper:e,children:t}=r,[s,n]=m.useState(null);return i.jsx(ig,{scope:e,anchor:s,onAnchorChange:n,children:t})};cl.displayName=zn;var dl="PopperAnchor",ul=m.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:s,...n}=r,o=ll(dl,t),a=m.useRef(null),l=de(e,a),c=m.useRef(null);return m.useEffect(()=>{const d=c.current;c.current=(s==null?void 0:s.current)||a.current,d!==c.current&&o.onAnchorChange(c.current)}),s?null:i.jsx(G.div,{...n,ref:l})});ul.displayName=dl;var Wn="PopperContent",[ag,lg]=il(Wn),hl=m.forwardRef((r,e)=>{var D,L,ce,Q,X,J;const{__scopePopper:t,side:s="bottom",sideOffset:n=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:u="partial",hideWhenDetached:g=!1,updatePositionStrategy:p="optimized",onPlaced:y,...f}=r,v=ll(Wn,t),[b,w]=m.useState(null),x=de(e,we=>w(we)),[_,S]=m.useState(null),k=La(_),j=(k==null?void 0:k.width)??0,A=(k==null?void 0:k.height)??0,B=s+(o!=="center"?"-"+o:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},W=Array.isArray(d)?d:[d],I=W.length>0,E={padding:T,boundary:W.filter(dg),altBoundary:I},{refs:P,floatingStyles:M,placement:C,isPositioned:$,middlewareData:R}=Jp({strategy:"fixed",placement:B,whileElementsMounted:(...we)=>Bp(...we,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[Xp({mainAxis:n+A,alignmentAxis:a}),c&&Qp({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?Zp():void 0,...E}),c&&eg({...E}),tg({...E,apply:({elements:we,rects:Se,availableWidth:xt,availableHeight:nt})=>{const{width:$e,height:Er}=Se.reference,je=we.floating.style;je.setProperty("--radix-popper-available-width",`${xt}px`),je.setProperty("--radix-popper-available-height",`${nt}px`),je.setProperty("--radix-popper-anchor-width",`${$e}px`),je.setProperty("--radix-popper-anchor-height",`${Er}px`)}}),_&&sg({element:_,padding:l}),ug({arrowWidth:j,arrowHeight:A}),g&&rg({strategy:"referenceHidden",...E})]}),[O,V]=pl(C),te=tt(y);pe(()=>{$&&(te==null||te())},[$,te]);const Re=(D=R.arrow)==null?void 0:D.x,U=(L=R.arrow)==null?void 0:L.y,Z=((ce=R.arrow)==null?void 0:ce.centerOffset)!==0,[re,ue]=m.useState();return pe(()=>{b&&ue(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:$?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(Q=R.transformOrigin)==null?void 0:Q.x,(X=R.transformOrigin)==null?void 0:X.y].join(" "),...((J=R.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:i.jsx(ag,{scope:t,placedSide:O,onArrowChange:S,arrowX:Re,arrowY:U,shouldHideArrow:Z,children:i.jsx(G.div,{"data-side":O,"data-align":V,...f,ref:x,style:{...f.style,animation:$?void 0:"none"}})})})});hl.displayName=Wn;var fl="PopperArrow",cg={top:"bottom",right:"left",bottom:"top",left:"right"},ml=m.forwardRef(function(e,t){const{__scopePopper:s,...n}=e,o=lg(fl,s),a=cg[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(og,{...n,ref:t,style:{...n.style,display:"block"}})})});ml.displayName=fl;function dg(r){return r!==null}var ug=r=>({name:"transformOrigin",options:r,fn(e){var v,b,w;const{placement:t,rects:s,middlewareData:n}=e,a=((v=n.arrow)==null?void 0:v.centerOffset)!==0,l=a?0:r.arrowWidth,c=a?0:r.arrowHeight,[d,h]=pl(t),u={start:"0%",center:"50%",end:"100%"}[h],g=(((b=n.arrow)==null?void 0:b.x)??0)+l/2,p=(((w=n.arrow)==null?void 0:w.y)??0)+c/2;let y="",f="";return d==="bottom"?(y=a?u:`${g}px`,f=`${-c}px`):d==="top"?(y=a?u:`${g}px`,f=`${s.floating.height+c}px`):d==="right"?(y=`${-c}px`,f=a?u:`${p}px`):d==="left"&&(y=`${s.floating.width+c}px`,f=a?u:`${p}px`),{data:{x:y,y:f}}}});function pl(r){const[e,t="center"]=r.split("-");return[e,t]}var hg=cl,fg=ul,mg=hl,pg=ml,gg="Portal",gl=m.forwardRef((r,e)=>{var l;const{container:t,...s}=r,[n,o]=m.useState(!1);pe(()=>o(!0),[]);const a=t||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?ui.createPortal(i.jsx(G.div,{...s,ref:e}),a):null});gl.displayName=gg;var vl=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vg="VisuallyHidden",yg=m.forwardRef((r,e)=>i.jsx(G.span,{...r,ref:e,style:{...vl,...r.style}}));yg.displayName=vg;var bg=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},Bt=new WeakMap,Mr=new WeakMap,Br={},Hs=0,yl=function(r){return r&&(r.host||yl(r.parentNode))},xg=function(r,e){return e.map(function(t){if(r.contains(t))return t;var s=yl(t);return s&&r.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},wg=function(r,e,t,s){var n=xg(e,Array.isArray(r)?r:[r]);Br[t]||(Br[t]=new WeakMap);var o=Br[t],a=[],l=new Set,c=new Set(n),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};n.forEach(d);var h=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(g){if(l.has(g))h(g);else try{var p=g.getAttribute(s),y=p!==null&&p!=="false",f=(Bt.get(g)||0)+1,v=(o.get(g)||0)+1;Bt.set(g,f),o.set(g,v),a.push(g),f===1&&y&&Mr.set(g,!0),v===1&&g.setAttribute(t,"true"),y||g.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",g,b)}})};return h(e),l.clear(),Hs++,function(){a.forEach(function(u){var g=Bt.get(u)-1,p=o.get(u)-1;Bt.set(u,g),o.set(u,p),g||(Mr.has(u)||u.removeAttribute(s),Mr.delete(u)),p||u.removeAttribute(t)}),Hs--,Hs||(Bt=new WeakMap,Bt=new WeakMap,Mr=new WeakMap,Br={})}},_g=function(r,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(r)?r:[r]),n=bg(r);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),wg(s,n,t,"aria-hidden")):function(){return null}},qe=function(){return qe=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qe.apply(this,arguments)};function bl(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t}function Sg(r,e,t){if(t||arguments.length===2)for(var s=0,n=e.length,o;s<n;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return r.concat(o||Array.prototype.slice.call(e))}var Wr="right-scroll-bar-position",Vr="width-before-scroll-bar",jg="with-scroll-bars-hidden",kg="--removed-body-scroll-bar-size";function zs(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function Eg(r,e){var t=m.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(s){var n=t.value;n!==s&&(t.value=s,t.callback(s,n))}}}})[0];return t.callback=e,t.facade}var Ng=typeof window<"u"?m.useLayoutEffect:m.useEffect,oi=new WeakMap;function Cg(r,e){var t=Eg(null,function(s){return r.forEach(function(n){return zs(n,s)})});return Ng(function(){var s=oi.get(t);if(s){var n=new Set(s),o=new Set(r),a=t.current;n.forEach(function(l){o.has(l)||zs(l,null)}),o.forEach(function(l){n.has(l)||zs(l,a)})}oi.set(t,r)},[r]),t}function Tg(r){return r}function Ag(r,e){e===void 0&&(e=Tg);var t=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(o){var a=e(o,s);return t.push(a),function(){t=t.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(s=!0;t.length;){var a=t;t=[],a.forEach(o)}t={push:function(l){return o(l)},filter:function(){return t}}},assignMedium:function(o){s=!0;var a=[];if(t.length){var l=t;t=[],l.forEach(o),a=t}var c=function(){var h=a;a=[],h.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),t}}}};return n}function Pg(r){r===void 0&&(r={});var e=Ag(null);return e.options=qe({async:!0,ssr:!1},r),e}var xl=function(r){var e=r.sideCar,t=bl(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return m.createElement(s,qe({},t))};xl.isSideCarExport=!0;function Rg(r,e){return r.useMedium(e),xl}var wl=Pg(),Ws=function(){},ps=m.forwardRef(function(r,e){var t=m.useRef(null),s=m.useState({onScrollCapture:Ws,onWheelCapture:Ws,onTouchMoveCapture:Ws}),n=s[0],o=s[1],a=r.forwardProps,l=r.children,c=r.className,d=r.removeScrollBar,h=r.enabled,u=r.shards,g=r.sideCar,p=r.noRelative,y=r.noIsolation,f=r.inert,v=r.allowPinchZoom,b=r.as,w=b===void 0?"div":b,x=r.gapMode,_=bl(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=g,k=Cg([t,e]),j=qe(qe({},_),n);return m.createElement(m.Fragment,null,h&&m.createElement(S,{sideCar:wl,removeScrollBar:d,shards:u,noRelative:p,noIsolation:y,inert:f,setCallbacks:o,allowPinchZoom:!!v,lockRef:t,gapMode:x}),a?m.cloneElement(m.Children.only(l),qe(qe({},j),{ref:k})):m.createElement(w,qe({},j,{className:c,ref:k}),l))});ps.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ps.classNames={fullWidth:Vr,zeroRight:Wr};var Ig=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Og(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=Ig();return e&&r.setAttribute("nonce",e),r}function $g(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function Dg(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var Lg=function(){var r=0,e=null;return{add:function(t){r==0&&(e=Og())&&($g(e,t),Dg(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Mg=function(){var r=Lg();return function(e,t){m.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},_l=function(){var r=Mg(),e=function(t){var s=t.styles,n=t.dynamic;return r(s,n),null};return e},Bg={left:0,top:0,right:0,gap:0},Vs=function(r){return parseInt(r||"",10)||0},Fg=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],s=e[r==="padding"?"paddingTop":"marginTop"],n=e[r==="padding"?"paddingRight":"marginRight"];return[Vs(t),Vs(s),Vs(n)]},Ug=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return Bg;var e=Fg(r),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},Hg=_l(),Gt="data-scroll-locked",zg=function(r,e,t,s){var n=r.left,o=r.top,a=r.right,l=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(jg,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Gt,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wr,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Vr,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Wr," .").concat(Wr,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Vr," .").concat(Vr,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Gt,`] {
    `).concat(kg,": ").concat(l,`px;
  }
`)},ii=function(){var r=parseInt(document.body.getAttribute(Gt)||"0",10);return isFinite(r)?r:0},Wg=function(){m.useEffect(function(){return document.body.setAttribute(Gt,(ii()+1).toString()),function(){var r=ii()-1;r<=0?document.body.removeAttribute(Gt):document.body.setAttribute(Gt,r.toString())}},[])},Vg=function(r){var e=r.noRelative,t=r.noImportant,s=r.gapMode,n=s===void 0?"margin":s;Wg();var o=m.useMemo(function(){return Ug(n)},[n]);return m.createElement(Hg,{styles:zg(o,!e,n,t?"":"!important")})},yn=!1;if(typeof window<"u")try{var Fr=Object.defineProperty({},"passive",{get:function(){return yn=!0,!0}});window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{yn=!1}var Ft=yn?{passive:!1}:!1,qg=function(r){return r.tagName==="TEXTAREA"},Sl=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!qg(r)&&t[e]==="visible")},Kg=function(r){return Sl(r,"overflowY")},Gg=function(r){return Sl(r,"overflowX")},ai=function(r,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=jl(r,s);if(n){var o=kl(r,s),a=o[1],l=o[2];if(a>l)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},Jg=function(r){var e=r.scrollTop,t=r.scrollHeight,s=r.clientHeight;return[e,t,s]},Yg=function(r){var e=r.scrollLeft,t=r.scrollWidth,s=r.clientWidth;return[e,t,s]},jl=function(r,e){return r==="v"?Kg(e):Gg(e)},kl=function(r,e){return r==="v"?Jg(e):Yg(e)},Xg=function(r,e){return r==="h"&&e==="rtl"?-1:1},Qg=function(r,e,t,s,n){var o=Xg(r,window.getComputedStyle(e).direction),a=o*s,l=t.target,c=e.contains(l),d=!1,h=a>0,u=0,g=0;do{if(!l)break;var p=kl(r,l),y=p[0],f=p[1],v=p[2],b=f-v-o*y;(y||b)&&jl(r,l)&&(u+=b,g+=y);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(u)<1||!h&&Math.abs(g)<1)&&(d=!0),d},Ur=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},li=function(r){return[r.deltaX,r.deltaY]},ci=function(r){return r&&"current"in r?r.current:r},Zg=function(r,e){return r[0]===e[0]&&r[1]===e[1]},ev=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},tv=0,Ut=[];function rv(r){var e=m.useRef([]),t=m.useRef([0,0]),s=m.useRef(),n=m.useState(tv++)[0],o=m.useState(_l)[0],a=m.useRef(r);m.useEffect(function(){a.current=r},[r]),m.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(n));var f=Sg([r.lockRef.current],(r.shards||[]).map(ci),!0).filter(Boolean);return f.forEach(function(v){return v.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),f.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(n))})}}},[r.inert,r.lockRef.current,r.shards]);var l=m.useCallback(function(f,v){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!a.current.allowPinchZoom;var b=Ur(f),w=t.current,x="deltaX"in f?f.deltaX:w[0]-b[0],_="deltaY"in f?f.deltaY:w[1]-b[1],S,k=f.target,j=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in f&&j==="h"&&k.type==="range")return!1;var A=ai(j,k);if(!A)return!0;if(A?S=j:(S=j==="v"?"h":"v",A=ai(j,k)),!A)return!1;if(!s.current&&"changedTouches"in f&&(x||_)&&(s.current=S),!S)return!0;var B=s.current||S;return Qg(B,v,f,B==="h"?x:_)},[]),c=m.useCallback(function(f){var v=f;if(!(!Ut.length||Ut[Ut.length-1]!==o)){var b="deltaY"in v?li(v):Ur(v),w=e.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&Zg(S.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(a.current.shards||[]).map(ci).filter(Boolean).filter(function(S){return S.contains(v.target)}),_=x.length>0?l(v,x[0]):!a.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),d=m.useCallback(function(f,v,b,w){var x={name:f,delta:v,target:b,should:w,shadowParent:sv(b)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(_){return _!==x})},1)},[]),h=m.useCallback(function(f){t.current=Ur(f),s.current=void 0},[]),u=m.useCallback(function(f){d(f.type,li(f),f.target,l(f,r.lockRef.current))},[]),g=m.useCallback(function(f){d(f.type,Ur(f),f.target,l(f,r.lockRef.current))},[]);m.useEffect(function(){return Ut.push(o),r.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:g}),document.addEventListener("wheel",c,Ft),document.addEventListener("touchmove",c,Ft),document.addEventListener("touchstart",h,Ft),function(){Ut=Ut.filter(function(f){return f!==o}),document.removeEventListener("wheel",c,Ft),document.removeEventListener("touchmove",c,Ft),document.removeEventListener("touchstart",h,Ft)}},[]);var p=r.removeScrollBar,y=r.inert;return m.createElement(m.Fragment,null,y?m.createElement(o,{styles:ev(n)}):null,p?m.createElement(Vg,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function sv(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const nv=Rg(wl,rv);var El=m.forwardRef(function(r,e){return m.createElement(ps,qe({},r,{ref:e,sideCar:nv}))});El.classNames=ps.classNames;var ov=[" ","Enter","ArrowUp","ArrowDown"],iv=[" ","Enter"],Nt="Select",[gs,vs,av]=da(Nt),[sr,by]=gt(Nt,[av,al]),ys=al(),[lv,yt]=sr(Nt),[cv,dv]=sr(Nt),Nl=r=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:n,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:u,disabled:g,required:p,form:y}=r,f=ys(e),[v,b]=m.useState(null),[w,x]=m.useState(null),[_,S]=m.useState(!1),k=In(d),[j,A]=gr({prop:s,defaultProp:n??!1,onChange:o,caller:Nt}),[B,T]=gr({prop:a,defaultProp:l,onChange:c,caller:Nt}),W=m.useRef(null),I=v?y||!!v.closest("form"):!0,[E,P]=m.useState(new Set),M=Array.from(E).map(C=>C.props.value).join(";");return i.jsx(hg,{...f,children:i.jsxs(lv,{required:p,scope:e,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:Sr(),value:B,onValueChange:T,open:j,onOpenChange:A,dir:k,triggerPointerDownPosRef:W,disabled:g,children:[i.jsx(gs.Provider,{scope:e,children:i.jsx(cv,{scope:r.__scopeSelect,onNativeOptionAdd:m.useCallback(C=>{P($=>new Set($).add(C))},[]),onNativeOptionRemove:m.useCallback(C=>{P($=>{const R=new Set($);return R.delete(C),R})},[]),children:t})}),I?i.jsxs(Jl,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:u,value:B,onChange:C=>T(C.target.value),disabled:g,form:y,children:[B===void 0?i.jsx("option",{value:""}):null,Array.from(E)]},M):null]})})};Nl.displayName=Nt;var Cl="SelectTrigger",Tl=m.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:s=!1,...n}=r,o=ys(t),a=yt(Cl,t),l=a.disabled||s,c=de(e,a.onTriggerChange),d=vs(t),h=m.useRef("touch"),[u,g,p]=Xl(f=>{const v=d().filter(x=>!x.disabled),b=v.find(x=>x.value===a.value),w=Ql(v,f,b);w!==void 0&&a.onValueChange(w.value)}),y=f=>{l||(a.onOpenChange(!0),p()),f&&(a.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return i.jsx(fg,{asChild:!0,...o,children:i.jsx(G.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Yl(a.value)?"":void 0,...n,ref:c,onClick:ee(n.onClick,f=>{f.currentTarget.focus(),h.current!=="mouse"&&y(f)}),onPointerDown:ee(n.onPointerDown,f=>{h.current=f.pointerType;const v=f.target;v.hasPointerCapture(f.pointerId)&&v.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(y(f),f.preventDefault())}),onKeyDown:ee(n.onKeyDown,f=>{const v=u.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&g(f.key),!(v&&f.key===" ")&&ov.includes(f.key)&&(y(),f.preventDefault())})})})});Tl.displayName=Cl;var Al="SelectValue",Pl=m.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,children:o,placeholder:a="",...l}=r,c=yt(Al,t),{onValueNodeHasChildrenChange:d}=c,h=o!==void 0,u=de(e,c.onValueNodeChange);return pe(()=>{d(h)},[d,h]),i.jsx(G.span,{...l,ref:u,style:{pointerEvents:"none"},children:Yl(c.value)?i.jsx(i.Fragment,{children:a}):o})});Pl.displayName=Al;var uv="SelectIcon",Rl=m.forwardRef((r,e)=>{const{__scopeSelect:t,children:s,...n}=r;return i.jsx(G.span,{"aria-hidden":!0,...n,ref:e,children:s||"▼"})});Rl.displayName=uv;var hv="SelectPortal",Il=r=>i.jsx(gl,{asChild:!0,...r});Il.displayName=hv;var Ct="SelectContent",Ol=m.forwardRef((r,e)=>{const t=yt(Ct,r.__scopeSelect),[s,n]=m.useState();if(pe(()=>{n(new DocumentFragment)},[]),!t.open){const o=s;return o?br.createPortal(i.jsx($l,{scope:r.__scopeSelect,children:i.jsx(gs.Slot,{scope:r.__scopeSelect,children:i.jsx("div",{children:r.children})})}),o):null}return i.jsx(Dl,{...r,ref:e})});Ol.displayName=Ct;var Be=10,[$l,bt]=sr(Ct),fv="SelectContentImpl",mv=mr("SelectContent.RemoveScroll"),Dl=m.forwardRef((r,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:u,collisionBoundary:g,collisionPadding:p,sticky:y,hideWhenDetached:f,avoidCollisions:v,...b}=r,w=yt(Ct,t),[x,_]=m.useState(null),[S,k]=m.useState(null),j=de(e,D=>_(D)),[A,B]=m.useState(null),[T,W]=m.useState(null),I=vs(t),[E,P]=m.useState(!1),M=m.useRef(!1);m.useEffect(()=>{if(x)return _g(x)},[x]),Fm();const C=m.useCallback(D=>{const[L,...ce]=I().map(J=>J.ref.current),[Q]=ce.slice(-1),X=document.activeElement;for(const J of D)if(J===X||(J==null||J.scrollIntoView({block:"nearest"}),J===L&&S&&(S.scrollTop=0),J===Q&&S&&(S.scrollTop=S.scrollHeight),J==null||J.focus(),document.activeElement!==X))return},[I,S]),$=m.useCallback(()=>C([A,x]),[C,A,x]);m.useEffect(()=>{E&&$()},[E,$]);const{onOpenChange:R,triggerPointerDownPosRef:O}=w;m.useEffect(()=>{if(x){let D={x:0,y:0};const L=Q=>{var X,J;D={x:Math.abs(Math.round(Q.pageX)-(((X=O.current)==null?void 0:X.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((J=O.current)==null?void 0:J.y)??0))}},ce=Q=>{D.x<=10&&D.y<=10?Q.preventDefault():x.contains(Q.target)||R(!1),document.removeEventListener("pointermove",L),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",ce,{capture:!0})}}},[x,R,O]),m.useEffect(()=>{const D=()=>R(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[R]);const[V,te]=Xl(D=>{const L=I().filter(X=>!X.disabled),ce=L.find(X=>X.ref.current===document.activeElement),Q=Ql(L,D,ce);Q&&setTimeout(()=>Q.ref.current.focus())}),Re=m.useCallback((D,L,ce)=>{const Q=!M.current&&!ce;(w.value!==void 0&&w.value===L||Q)&&(B(D),Q&&(M.current=!0))},[w.value]),U=m.useCallback(()=>x==null?void 0:x.focus(),[x]),Z=m.useCallback((D,L,ce)=>{const Q=!M.current&&!ce;(w.value!==void 0&&w.value===L||Q)&&W(D)},[w.value]),re=s==="popper"?bn:Ll,ue=re===bn?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:u,collisionBoundary:g,collisionPadding:p,sticky:y,hideWhenDetached:f,avoidCollisions:v}:{};return i.jsx($l,{scope:t,content:x,viewport:S,onViewportChange:k,itemRefCallback:Re,selectedItem:A,onItemLeave:U,itemTextRefCallback:Z,focusSelectedItem:$,selectedItemText:T,position:s,isPositioned:E,searchRef:V,children:i.jsx(El,{as:mv,allowPinchZoom:!0,children:i.jsx(qa,{asChild:!0,trapped:w.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:ee(n,D=>{var L;(L=w.trigger)==null||L.focus({preventScroll:!0}),D.preventDefault()}),children:i.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(re,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:D=>D.preventDefault(),...b,...ue,onPlaced:()=>P(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ee(b.onKeyDown,D=>{const L=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!L&&D.key.length===1&&te(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let Q=I().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(D.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const X=D.target,J=Q.indexOf(X);Q=Q.slice(J+1)}setTimeout(()=>C(Q)),D.preventDefault()}})})})})})})});Dl.displayName=fv;var pv="SelectItemAlignedPosition",Ll=m.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:s,...n}=r,o=yt(Ct,t),a=bt(Ct,t),[l,c]=m.useState(null),[d,h]=m.useState(null),u=de(e,j=>h(j)),g=vs(t),p=m.useRef(!1),y=m.useRef(!0),{viewport:f,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=a,x=m.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&f&&v&&b){const j=o.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),B=o.valueNode.getBoundingClientRect(),T=b.getBoundingClientRect();if(o.dir!=="rtl"){const X=T.left-A.left,J=B.left-X,we=j.left-J,Se=j.width+we,xt=Math.max(Se,A.width),nt=window.innerWidth-Be,$e=Fo(J,[Be,Math.max(Be,nt-xt)]);l.style.minWidth=Se+"px",l.style.left=$e+"px"}else{const X=A.right-T.right,J=window.innerWidth-B.right-X,we=window.innerWidth-j.right-J,Se=j.width+we,xt=Math.max(Se,A.width),nt=window.innerWidth-Be,$e=Fo(J,[Be,Math.max(Be,nt-xt)]);l.style.minWidth=Se+"px",l.style.right=$e+"px"}const W=g(),I=window.innerHeight-Be*2,E=f.scrollHeight,P=window.getComputedStyle(d),M=parseInt(P.borderTopWidth,10),C=parseInt(P.paddingTop,10),$=parseInt(P.borderBottomWidth,10),R=parseInt(P.paddingBottom,10),O=M+C+E+R+$,V=Math.min(v.offsetHeight*5,O),te=window.getComputedStyle(f),Re=parseInt(te.paddingTop,10),U=parseInt(te.paddingBottom,10),Z=j.top+j.height/2-Be,re=I-Z,ue=v.offsetHeight/2,D=v.offsetTop+ue,L=M+C+D,ce=O-L;if(L<=Z){const X=W.length>0&&v===W[W.length-1].ref.current;l.style.bottom="0px";const J=d.clientHeight-f.offsetTop-f.offsetHeight,we=Math.max(re,ue+(X?U:0)+J+$),Se=L+we;l.style.height=Se+"px"}else{const X=W.length>0&&v===W[0].ref.current;l.style.top="0px";const we=Math.max(Z,M+f.offsetTop+(X?Re:0)+ue)+ce;l.style.height=we+"px",f.scrollTop=L-Z+f.offsetTop}l.style.margin=`${Be}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=I+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[g,o.trigger,o.valueNode,l,d,f,v,b,o.dir,s]);pe(()=>x(),[x]);const[_,S]=m.useState();pe(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const k=m.useCallback(j=>{j&&y.current===!0&&(x(),w==null||w(),y.current=!1)},[x,w]);return i.jsx(vv,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(G.div,{...n,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});Ll.displayName=pv;var gv="SelectPopperPosition",bn=m.forwardRef((r,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:n=Be,...o}=r,a=ys(t);return i.jsx(mg,{...a,...o,ref:e,align:s,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bn.displayName=gv;var[vv,Vn]=sr(Ct,{}),xn="SelectViewport",Ml=m.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:s,...n}=r,o=bt(xn,t),a=Vn(xn,t),l=de(e,o.onViewportChange),c=m.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(gs.Slot,{scope:t,children:i.jsx(G.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:ee(n.onScroll,d=>{const h=d.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:g}=a;if(g!=null&&g.current&&u){const p=Math.abs(c.current-h.scrollTop);if(p>0){const y=window.innerHeight-Be*2,f=parseFloat(u.style.minHeight),v=parseFloat(u.style.height),b=Math.max(f,v);if(b<y){const w=b+p,x=Math.min(y,w),_=w-x;u.style.height=x+"px",u.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,u.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Ml.displayName=xn;var Bl="SelectGroup",[yv,bv]=sr(Bl),xv=m.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=Sr();return i.jsx(yv,{scope:t,id:n,children:i.jsx(G.div,{role:"group","aria-labelledby":n,...s,ref:e})})});xv.displayName=Bl;var Fl="SelectLabel",wv=m.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=bv(Fl,t);return i.jsx(G.div,{id:n.id,...s,ref:e})});wv.displayName=Fl;var ts="SelectItem",[_v,Ul]=sr(ts),Hl=m.forwardRef((r,e)=>{const{__scopeSelect:t,value:s,disabled:n=!1,textValue:o,...a}=r,l=yt(ts,t),c=bt(ts,t),d=l.value===s,[h,u]=m.useState(o??""),[g,p]=m.useState(!1),y=de(e,w=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,w,s,n)}),f=Sr(),v=m.useRef("touch"),b=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(_v,{scope:t,value:s,disabled:n,textId:f,isSelected:d,onItemTextChange:m.useCallback(w=>{u(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(gs.ItemSlot,{scope:t,value:s,disabled:n,textValue:h,children:i.jsx(G.div,{role:"option","aria-labelledby":f,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...a,ref:y,onFocus:ee(a.onFocus,()=>p(!0)),onBlur:ee(a.onBlur,()=>p(!1)),onClick:ee(a.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:ee(a.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:ee(a.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:ee(a.onPointerMove,w=>{var x;v.current=w.pointerType,n?(x=c.onItemLeave)==null||x.call(c):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ee(a.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:ee(a.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(iv.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});Hl.displayName=ts;var lr="SelectItemText",zl=m.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,...o}=r,a=yt(lr,t),l=bt(lr,t),c=Ul(lr,t),d=dv(lr,t),[h,u]=m.useState(null),g=de(e,b=>u(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),p=h==null?void 0:h.textContent,y=m.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:f,onNativeOptionRemove:v}=d;return pe(()=>(f(y),()=>v(y)),[f,v,y]),i.jsxs(i.Fragment,{children:[i.jsx(G.span,{id:c.textId,...o,ref:g}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?br.createPortal(o.children,a.valueNode):null]})});zl.displayName=lr;var Wl="SelectItemIndicator",Vl=m.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return Ul(Wl,t).isSelected?i.jsx(G.span,{"aria-hidden":!0,...s,ref:e}):null});Vl.displayName=Wl;var wn="SelectScrollUpButton",ql=m.forwardRef((r,e)=>{const t=bt(wn,r.__scopeSelect),s=Vn(wn,r.__scopeSelect),[n,o]=m.useState(!1),a=de(e,s.onScrollButtonChange);return pe(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?i.jsx(Gl,{...r,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ql.displayName=wn;var _n="SelectScrollDownButton",Kl=m.forwardRef((r,e)=>{const t=bt(_n,r.__scopeSelect),s=Vn(_n,r.__scopeSelect),[n,o]=m.useState(!1),a=de(e,s.onScrollButtonChange);return pe(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;o(h)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?i.jsx(Gl,{...r,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Kl.displayName=_n;var Gl=m.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:s,...n}=r,o=bt("SelectScrollButton",t),a=m.useRef(null),l=vs(t),c=m.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),pe(()=>{var h;const d=l().find(u=>u.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(G.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:ee(n.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:ee(n.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:ee(n.onPointerLeave,()=>{c()})})}),Sv="SelectSeparator",jv=m.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return i.jsx(G.div,{"aria-hidden":!0,...s,ref:e})});jv.displayName=Sv;var Sn="SelectArrow",kv=m.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=ys(t),o=yt(Sn,t),a=bt(Sn,t);return o.open&&a.position==="popper"?i.jsx(pg,{...n,...s,ref:e}):null});kv.displayName=Sn;var Ev="SelectBubbleInput",Jl=m.forwardRef(({__scopeSelect:r,value:e,...t},s)=>{const n=m.useRef(null),o=de(s,n),a=Da(e);return m.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const u=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(u)}},[a,e]),i.jsx(G.select,{...t,style:{...vl,...t.style},ref:o,defaultValue:e})});Jl.displayName=Ev;function Yl(r){return r===""||r===void 0}function Xl(r){const e=tt(r),t=m.useRef(""),s=m.useRef(0),n=m.useCallback(a=>{const l=t.current+a;e(l),function c(d){t.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=m.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,n,o]}function Ql(r,e,t){const n=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=t?r.indexOf(t):-1;let a=Nv(r,Math.max(o,0));n.length===1&&(a=a.filter(d=>d!==t));const c=a.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==t?c:void 0}function Nv(r,e){return r.map((t,s)=>r[(e+s)%r.length])}var Cv=Nl,Tv=Tl,Av=Pl,Pv=Rl,Rv=Il,Iv=Ol,Ov=Ml,$v=Hl,Dv=zl,Lv=Vl,Mv=ql,Bv=Kl;function qs({...r}){return i.jsx(Cv,{"data-slot":"select",...r})}function Ks({...r}){return i.jsx(Av,{"data-slot":"select-value",...r})}function Gs({className:r,size:e="default",children:t,...s}){return i.jsxs(Tv,{"data-slot":"select-trigger","data-size":e,className:se("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...s,children:[t,i.jsx(Pv,{asChild:!0,children:i.jsx(pi,{className:"size-4 opacity-50"})})]})}function Js({className:r,children:e,position:t="popper",...s}){return i.jsx(Rv,{children:i.jsxs(Iv,{"data-slot":"select-content",className:se("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...s,children:[i.jsx(Fv,{}),i.jsx(Ov,{className:se("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),i.jsx(Uv,{})]})})}function We({className:r,children:e,...t}){return i.jsxs($v,{"data-slot":"select-item",className:se("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...t,children:[i.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:i.jsx(Lv,{children:i.jsx(Sc,{className:"size-4"})})}),i.jsx(Dv,{children:e})]})}function Fv({className:r,...e}){return i.jsx(Mv,{"data-slot":"select-scroll-up-button",className:se("flex cursor-default items-center justify-center py-1",r),...e,children:i.jsx(jc,{className:"size-4"})})}function Uv({className:r,...e}){return i.jsx(Bv,{"data-slot":"select-scroll-down-button",className:se("flex cursor-default items-center justify-center py-1",r),...e,children:i.jsx(pi,{className:"size-4"})})}const di={theme:"system",notifications:{checkInReminder:!0,checkOutReminder:!0,breakReminder:!1,soundEnabled:!0},workingHours:{startTime:"09:00",endTime:"17:00",breakDuration:60,workingDays:["monday","tuesday","wednesday","thursday","friday"]},language:"es",timezone:"Europe/Madrid"},Hv=[{value:"monday",label:"Lunes"},{value:"tuesday",label:"Martes"},{value:"wednesday",label:"Miércoles"},{value:"thursday",label:"Jueves"},{value:"friday",label:"Viernes"},{value:"saturday",label:"Sábado"},{value:"sunday",label:"Domingo"}];function zv(){const[r,e]=m.useState(di),[t,s]=m.useState(!1),[n,o]=m.useState(!1);m.useEffect(()=>{a()},[]);const a=async()=>{try{s(!0);const d=await be("/settings");d.success&&d.settings&&e({...di,...d.settings})}catch(d){console.error("Error loading settings:",d)}finally{s(!1)}},l=async()=>{try{o(!0),(await be("/settings",{method:"POST",body:JSON.stringify({settings:r})})).success?Ge.success("Configuración guardada correctamente"):Ge.error("Error al guardar la configuración")}catch(d){console.error("Error saving settings:",d),Ge.error("Error al guardar la configuración")}finally{o(!1)}},c=d=>{e(h=>({...h,workingHours:{...h.workingHours,workingDays:h.workingHours.workingDays.includes(d)?h.workingHours.workingDays.filter(u=>u!==d):[...h.workingHours.workingDays,d]}}))};return t?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hr,{className:"h-6 w-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Configuración"})]}),i.jsx("div",{className:"grid gap-6",children:[1,2,3].map(d=>i.jsxs(K,{className:"animate-pulse",children:[i.jsx(oe,{children:i.jsx("div",{className:"h-6 bg-muted rounded w-1/3"})}),i.jsx(Y,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-2/3"}),i.jsx("div",{className:"h-10 bg-muted rounded"})]})})]},d))})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hr,{className:"h-6 w-6"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Configuración"})]}),i.jsxs(ye,{onClick:l,disabled:n,children:[i.jsx(mi,{className:"h-4 w-4 mr-2"}),n?"Guardando...":"Guardar"]})]}),i.jsxs("div",{className:"grid gap-6",children:[i.jsxs(K,{children:[i.jsx(oe,{children:i.jsxs(le,{className:"flex items-center gap-2",children:[i.jsx(no,{className:"h-5 w-5"}),"Apariencia"]})}),i.jsx(Y,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Tema"}),i.jsxs(qs,{value:r.theme,onValueChange:d=>e(h=>({...h,theme:d})),children:[i.jsx(Gs,{children:i.jsx(Ks,{})}),i.jsxs(Js,{children:[i.jsx(We,{value:"light",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(no,{className:"h-4 w-4"}),"Claro"]})}),i.jsx(We,{value:"dark",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kc,{className:"h-4 w-4"}),"Oscuro"]})}),i.jsx(We,{value:"system",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hr,{className:"h-4 w-4"}),"Sistema"]})})]})]})]})})]}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsxs(le,{className:"flex items-center gap-2",children:[i.jsx(Ec,{className:"h-5 w-5"}),"Notificaciones"]})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(ne,{children:"Recordatorio de entrada"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Te recordará cuando sea hora de fichar la entrada"})]}),i.jsx(Dr,{checked:r.notifications.checkInReminder,onCheckedChange:d=>e(h=>({...h,notifications:{...h.notifications,checkInReminder:d}}))})]}),i.jsx(qt,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(ne,{children:"Recordatorio de salida"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Te recordará cuando sea hora de fichar la salida"})]}),i.jsx(Dr,{checked:r.notifications.checkOutReminder,onCheckedChange:d=>e(h=>({...h,notifications:{...h.notifications,checkOutReminder:d}}))})]}),i.jsx(qt,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(ne,{children:"Recordatorio de descanso"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Te recordará tomar descansos regulares"})]}),i.jsx(Dr,{checked:r.notifications.breakReminder,onCheckedChange:d=>e(h=>({...h,notifications:{...h.notifications,breakReminder:d}}))})]}),i.jsx(qt,{}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1 flex items-center gap-2",children:[i.jsx(Nc,{className:"h-4 w-4"}),i.jsx(ne,{children:"Sonidos activados"})]}),i.jsx(Dr,{checked:r.notifications.soundEnabled,onCheckedChange:d=>e(h=>({...h,notifications:{...h.notifications,soundEnabled:d}}))})]})]})]}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsxs(le,{className:"flex items-center gap-2",children:[i.jsx(Ae,{className:"h-5 w-5"}),"Horario Laboral"]})}),i.jsxs(Y,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Hora de inicio"}),i.jsx(me,{type:"time",value:r.workingHours.startTime,onChange:d=>e(h=>({...h,workingHours:{...h.workingHours,startTime:d.target.value}}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Hora de fin"}),i.jsx(me,{type:"time",value:r.workingHours.endTime,onChange:d=>e(h=>({...h,workingHours:{...h.workingHours,endTime:d.target.value}}))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Duración del descanso (minutos)"}),i.jsx(me,{type:"number",min:"0",max:"120",value:r.workingHours.breakDuration,onChange:d=>e(h=>({...h,workingHours:{...h.workingHours,breakDuration:parseInt(d.target.value)||0}}))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ne,{children:"Días laborables"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Hv.map(d=>i.jsx(ht,{variant:r.workingHours.workingDays.includes(d.value)?"default":"outline",className:"cursor-pointer",onClick:()=>c(d.value),children:d.label},d.value))})]})]})]}),i.jsxs(K,{children:[i.jsx(oe,{children:i.jsxs(le,{className:"flex items-center gap-2",children:[i.jsx(ft,{className:"h-5 w-5"}),"Localización"]})}),i.jsx(Y,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Idioma"}),i.jsxs(qs,{value:r.language,onValueChange:d=>e(h=>({...h,language:d})),children:[i.jsx(Gs,{children:i.jsx(Ks,{})}),i.jsxs(Js,{children:[i.jsx(We,{value:"es",children:"Español"}),i.jsx(We,{value:"en",children:"English"}),i.jsx(We,{value:"fr",children:"Français"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Zona horaria"}),i.jsxs(qs,{value:r.timezone,onValueChange:d=>e(h=>({...h,timezone:d})),children:[i.jsx(Gs,{children:i.jsx(Ks,{})}),i.jsxs(Js,{children:[i.jsx(We,{value:"Europe/Madrid",children:"Madrid (CET)"}),i.jsx(We,{value:"Europe/London",children:"Londres (GMT)"}),i.jsx(We,{value:"America/New_York",children:"Nueva York (EST)"}),i.jsx(We,{value:"America/Los_Angeles",children:"Los Angeles (PST)"})]})]})]})]})})]})]})]})}const Wv=kn("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Vv({className:r,variant:e,...t}){return i.jsx("div",{"data-slot":"alert",role:"alert",className:se(Wv({variant:e}),r),...t})}function qv({className:r,...e}){return i.jsx("div",{"data-slot":"alert-description",className:se("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...e})}function Kv(){const{login:r,register:e,loading:t}=At(),[s,n]=m.useState("login"),[o,a]=m.useState(!1),[l,c]=m.useState(!1),[d,h]=m.useState(""),[u,g]=m.useState({email:"",password:""}),[p,y]=m.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),f=S=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S),v=S=>S.length>=6,b=async S=>{if(S.preventDefault(),h(""),!u.email||!u.password){h("Por favor, completa todos los campos");return}if(!f(u.email)){h("Por favor, introduce un email válido");return}try{const k=await r(u.email,u.password);k.success?Ge.success("¡Sesión iniciada correctamente!"):h(k.error||"Error al iniciar sesión")}catch{h("Error de conexión. Inténtalo de nuevo.")}},w=async S=>{if(S.preventDefault(),h(""),!p.firstName||!p.lastName||!p.email||!p.password||!p.confirmPassword){h("Por favor, completa todos los campos");return}if(!f(p.email)){h("Por favor, introduce un email válido");return}if(!v(p.password)){h("La contraseña debe tener al menos 6 caracteres");return}if(p.password!==p.confirmPassword){h("Las contraseñas no coinciden");return}try{const k=await e(p.email,p.password,p.firstName,p.lastName);k.success?Ge.success("¡Cuenta creada e iniciada correctamente!"):h(k.error||"Error al crear la cuenta")}catch{h("Error de conexión. Inténtalo de nuevo.")}},x=(S,k)=>{g(j=>({...j,[S]:k})),d&&h("")},_=(S,k)=>{y(j=>({...j,[S]:k})),d&&h("")};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs("div",{className:"w-full max-w-md space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"bg-primary text-primary-foreground rounded-full p-3",children:i.jsx(Ae,{className:"h-8 w-8"})})}),i.jsx("h1",{className:"text-2xl font-bold",children:"TimeTracker"}),i.jsx("p",{className:"text-muted-foreground",children:"Control de horario empresarial"})]}),i.jsxs(K,{children:[i.jsxs(oe,{className:"space-y-1",children:[i.jsx(le,{className:"text-center",children:s==="login"?"Iniciar Sesión":"Crear Cuenta"}),i.jsx(bd,{className:"text-center",children:s==="login"?"Accede a tu cuenta para continuar":"Crea una nueva cuenta para comenzar"})]}),i.jsxs(Y,{children:[i.jsxs(Ca,{value:s,onValueChange:S=>n(S),children:[i.jsxs(Ta,{className:"grid w-full grid-cols-2",children:[i.jsxs(hr,{value:"login",className:"flex items-center gap-2",children:[i.jsx(oo,{className:"h-4 w-4"}),"Iniciar Sesión"]}),i.jsxs(hr,{value:"register",className:"flex items-center gap-2",children:[i.jsx(io,{className:"h-4 w-4"}),"Registrarse"]})]}),d&&i.jsxs(Vv,{className:"mt-4",variant:"destructive",children:[i.jsx(Cc,{className:"h-4 w-4"}),i.jsx(qv,{children:d})]}),i.jsx(fr,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(me,{id:"login-email",type:"email",placeholder:"tu@email.com",value:u.email,onChange:S=>x("email",S.target.value),className:"pl-10",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"login-password",children:"Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(me,{id:"login-password",type:o?"text":"password",placeholder:"Tu contraseña",value:u.password,onChange:S=>x("password",S.target.value),className:"pl-10 pr-10",required:!0}),i.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!o),children:o?i.jsx(js,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})})]})]}),i.jsx(ye,{type:"submit",className:"w-full",disabled:t,children:t?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Iniciando sesión..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{className:"h-4 w-4"}),"Iniciar Sesión"]})})]})}),i.jsx(fr,{value:"register",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"register-firstName",children:"Nombre"}),i.jsxs("div",{className:"relative",children:[i.jsx(qr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(me,{id:"register-firstName",type:"text",placeholder:"Nombre",value:p.firstName,onChange:S=>_("firstName",S.target.value),className:"pl-10",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"register-lastName",children:"Apellidos"}),i.jsx(me,{id:"register-lastName",type:"text",placeholder:"Apellidos",value:p.lastName,onChange:S=>_("lastName",S.target.value),required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"register-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(me,{id:"register-email",type:"email",placeholder:"tu@email.com",value:p.email,onChange:S=>_("email",S.target.value),className:"pl-10",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"register-password",children:"Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(me,{id:"register-password",type:o?"text":"password",placeholder:"Mínimo 6 caracteres",value:p.password,onChange:S=>_("password",S.target.value),className:"pl-10 pr-10",required:!0}),i.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!o),children:o?i.jsx(js,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"register-confirmPassword",children:"Confirmar Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(me,{id:"register-confirmPassword",type:l?"text":"password",placeholder:"Repite tu contraseña",value:p.confirmPassword,onChange:S=>_("confirmPassword",S.target.value),className:"pl-10 pr-10",required:!0}),i.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!l),children:l?i.jsx(js,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})})]})]}),i.jsx(ye,{type:"submit",className:"w-full",disabled:t,children:t?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creando cuenta..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(io,{className:"h-4 w-4"}),"Crear Cuenta"]})})]})})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx(qt,{}),i.jsx("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})]})]})]})]})})}var Gv=(r,e,t,s,n,o,a,l)=>{let c=document.documentElement,d=["light","dark"];function h(p){(Array.isArray(r)?r:[r]).forEach(y=>{let f=y==="class",v=f&&o?n.map(b=>o[b]||b):n;f?(c.classList.remove(...v),c.classList.add(o&&o[p]?o[p]:p)):c.setAttribute(y,p)}),u(p)}function u(p){l&&d.includes(p)&&(c.style.colorScheme=p)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)h(s);else try{let p=localStorage.getItem(e)||t,y=a&&p==="system"?g():p;h(y)}catch{}},Jv=m.createContext(void 0),Yv={setTheme:r=>{},themes:[]},Xv=()=>{var r;return(r=m.useContext(Jv))!=null?r:Yv};m.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:o,value:a,themes:l,nonce:c,scriptProps:d})=>{let h=JSON.stringify([t,e,o,r,l,a,s,n]).slice(1,-1);return m.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${Gv.toString()})(${h})`}})});const Qv=({...r})=>{const{theme:e="system"}=Xv();return i.jsx(Af,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})};function Zv(){const{user:r,loading:e}=At(),[t,s]=m.useState("dashboard");if(e)return i.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando..."})]})});if(!r)return i.jsx(Kv,{});const n=()=>{switch(t){case"dashboard":return i.jsx(Oo,{});case"history":return i.jsx(If,{});case"analytics":return i.jsx(am,{});case"calendar":return i.jsx(lm,{});case"profile":return i.jsx(km,{});case"settings":return i.jsx(zv,{});default:return i.jsx(Oo,{})}};return i.jsxs("div",{className:"h-screen bg-background flex",children:[i.jsx(Pf,{activeTab:t,onTabChange:s}),i.jsx("main",{className:"flex-1 overflow-auto p-6",children:n()}),i.jsx(Qv,{})]})}function ey(){return i.jsx(rf,{children:i.jsx(Rf,{children:i.jsx(Zv,{})})})}yi(document.getElementById("root")).render(i.jsx(ey,{}));
//# sourceMappingURL=index-CNJbSyXf.js.map
